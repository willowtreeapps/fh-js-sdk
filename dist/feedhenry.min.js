!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.feedhenry=e()}}(function(){var e;return function f(e,n,o){function d(t,l){if(!n[t]){if(!e[t]){var u="function"==typeof require&&require;if(!l&&u)return u(t,!0);if(i)return i(t,!0);throw new Error("Cannot find module '"+t+"'")}var p=n[t]={exports:{}};e[t][0].call(p.exports,function(f){var n=e[t][1][f];return d(n?n:f)},p,p.exports,f,e,n,o)}return n[t].exports}for(var i="function"==typeof require&&require,t=0;t<o.length;t++)d(o[t]);return d}({1:[function(e,f,n){(function(n){__browserify_shim_require__=e,function(e,f,n,o,d){var i=i||function(e,f){var n={},o=n.lib={},d=o.Base=function(){function e(){}return{extend:function(f){e.prototype=this;var n=new e;return f&&n.mixIn(f),n.hasOwnProperty("init")||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var f in e)e.hasOwnProperty(f)&&(this[f]=e[f]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),i=o.WordArray=d.extend({init:function(e,n){e=this.words=e||[],n!=f?this.sigBytes=n:this.sigBytes=4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var f=this.words,n=e.words,o=this.sigBytes,d=e.sigBytes;if(this.clamp(),o%4)for(var i=0;d>i;i++){var t=n[i>>>2]>>>24-i%4*8&255;f[o+i>>>2]|=t<<24-(o+i)%4*8}else if(n.length>65535)for(var i=0;d>i;i+=4)f[o+i>>>2]=n[i>>>2];else f.push.apply(f,n);return this.sigBytes+=d,this},clamp:function(){var f=this.words,n=this.sigBytes;f[n>>>2]&=4294967295<<32-n%4*8,f.length=e.ceil(n/4)},clone:function(){var e=d.clone.call(this);return e.words=this.words.slice(0),e},random:function(f){for(var n=[],o=0;f>o;o+=4)n.push(4294967296*e.random()|0);return new i.init(n,f)}}),t=n.enc={},l=t.Hex={stringify:function(e){for(var f=e.words,n=e.sigBytes,o=[],d=0;n>d;d++){var i=f[d>>>2]>>>24-d%4*8&255;o.push((i>>>4).toString(16)),o.push((15&i).toString(16))}return o.join("")},parse:function(e){for(var f=e.length,n=[],o=0;f>o;o+=2)n[o>>>3]|=parseInt(e.substr(o,2),16)<<24-o%8*4;return new i.init(n,f/2)}},u=t.Latin1={stringify:function(e){for(var f=e.words,n=e.sigBytes,o=[],d=0;n>d;d++){var i=f[d>>>2]>>>24-d%4*8&255;o.push(String.fromCharCode(i))}return o.join("")},parse:function(e){for(var f=e.length,n=[],o=0;f>o;o++)n[o>>>2]|=(255&e.charCodeAt(o))<<24-o%4*8;return new i.init(n,f)}},p=t.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(f){throw new Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},s=o.BufferedBlockAlgorithm=d.extend({reset:function(){this._data=new i.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=p.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(f){var n=this._data,o=n.words,d=n.sigBytes,t=this.blockSize,l=4*t,u=d/l;u=f?e.ceil(u):e.max((0|u)-this._minBufferSize,0);var p=u*t,s=e.min(4*p,d);if(p){for(var y=0;p>y;y+=t)this._doProcessBlock(o,y);var c=o.splice(0,p);n.sigBytes-=s}return new i.init(c,s)},clone:function(){var e=d.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),y=(o.Hasher=s.extend({cfg:d.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){s.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){e&&this._append(e);var f=this._doFinalize();return f},blockSize:16,_createHelper:function(e){return function(f,n){return new e.init(n).finalize(f)}},_createHmacHelper:function(e){return function(f,n){return new y.HMAC.init(e,n).finalize(f)}}}),n.algo={});return n}(Math);!function(){var e=i,f=e.lib,n=f.WordArray,o=e.enc;o.Base64={stringify:function(e){var f=e.words,n=e.sigBytes,o=this._map;e.clamp();for(var d=[],i=0;n>i;i+=3)for(var t=f[i>>>2]>>>24-i%4*8&255,l=f[i+1>>>2]>>>24-(i+1)%4*8&255,u=f[i+2>>>2]>>>24-(i+2)%4*8&255,p=t<<16|l<<8|u,s=0;4>s&&n>i+.75*s;s++)d.push(o.charAt(p>>>6*(3-s)&63));var y=o.charAt(64);if(y)for(;d.length%4;)d.push(y);return d.join("")},parse:function(e){var f=e.length,o=this._map,d=o.charAt(64);if(d){var i=e.indexOf(d);-1!=i&&(f=i)}for(var t=[],l=0,u=0;f>u;u++)if(u%4){var p=o.indexOf(e.charAt(u-1))<<u%4*2,s=o.indexOf(e.charAt(u))>>>6-u%4*2;t[l>>>2]|=(p|s)<<24-l%4*8,l++}return n.create(t,l)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),i.lib.Cipher||function(e){var f=i,n=f.lib,o=n.Base,d=n.WordArray,t=n.BufferedBlockAlgorithm,l=f.enc,u=(l.Utf8,l.Base64),p=f.algo,s=p.EvpKDF,y=n.Cipher=t.extend({cfg:o.extend(),createEncryptor:function(e,f){return this.create(this._ENC_XFORM_MODE,e,f)},createDecryptor:function(e,f){return this.create(this._DEC_XFORM_MODE,e,f)},init:function(e,f,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=f,this.reset()},reset:function(){t.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){e&&this._append(e);var f=this._doFinalize();return f},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?k:h}return function(f){return{encrypt:function(n,o,d){return e(o).encrypt(f,n,o,d)},decrypt:function(n,o,d){return e(o).decrypt(f,n,o,d)}}}}()}),c=(n.StreamCipher=y.extend({_doFinalize:function(){var e=this._process(!0);return e},blockSize:1}),f.mode={}),r=n.BlockCipherMode=o.extend({createEncryptor:function(e,f){return this.Encryptor.create(e,f)},createDecryptor:function(e,f){return this.Decryptor.create(e,f)},init:function(e,f){this._cipher=e,this._iv=f}}),a=c.CBC=function(){function f(f,n,o){var d=this._iv;if(d){var i=d;this._iv=e}else var i=this._prevBlock;for(var t=0;o>t;t++)f[n+t]^=i[t]}var n=r.extend();return n.Encryptor=n.extend({processBlock:function(e,n){var o=this._cipher,d=o.blockSize;f.call(this,e,n,d),o.encryptBlock(e,n),this._prevBlock=e.slice(n,n+d)}}),n.Decryptor=n.extend({processBlock:function(e,n){var o=this._cipher,d=o.blockSize,i=e.slice(n,n+d);o.decryptBlock(e,n),f.call(this,e,n,d),this._prevBlock=i}}),n}(),w=f.pad={},b=w.Pkcs7={pad:function(e,f){for(var n=4*f,o=n-e.sigBytes%n,i=o<<24|o<<16|o<<8|o,t=[],l=0;o>l;l+=4)t.push(i);var u=d.create(t,o);e.concat(u)},unpad:function(e){var f=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=f}},g=(n.BlockCipher=y.extend({cfg:y.cfg.extend({mode:a,padding:b}),reset:function(){y.reset.call(this);var e=this.cfg,f=e.iv,n=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var o=n.createEncryptor;else{var o=n.createDecryptor;this._minBufferSize=1}this._mode=o.call(n,this,f&&f.words)},_doProcessBlock:function(e,f){this._mode.processBlock(e,f)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var f=this._process(!0)}else{var f=this._process(!0);e.unpad(f)}return f},blockSize:4}),n.CipherParams=o.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),m=f.format={},x=m.OpenSSL={stringify:function(e){var f=e.ciphertext,n=e.salt;if(n)var o=d.create([1398893684,1701076831]).concat(n).concat(f);else var o=f;return o.toString(u)},parse:function(e){var f=u.parse(e),n=f.words;if(1398893684==n[0]&&1701076831==n[1]){var o=d.create(n.slice(2,4));n.splice(0,4),f.sigBytes-=16}return g.create({ciphertext:f,salt:o})}},h=n.SerializableCipher=o.extend({cfg:o.extend({format:x}),encrypt:function(e,f,n,o){o=this.cfg.extend(o);var d=e.createEncryptor(n,o),i=d.finalize(f),t=d.cfg;return g.create({ciphertext:i,key:n,iv:t.iv,algorithm:e,mode:t.mode,padding:t.padding,blockSize:e.blockSize,formatter:o.format})},decrypt:function(e,f,n,o){o=this.cfg.extend(o),f=this._parse(f,o.format);var d=e.createDecryptor(n,o).finalize(f.ciphertext);return d},_parse:function(e,f){return"string"==typeof e?f.parse(e,this):e}}),j=f.kdf={},v=j.OpenSSL={execute:function(e,f,n,o){o||(o=d.random(8));var i=s.create({keySize:f+n}).compute(e,o),t=d.create(i.words.slice(f),4*n);return i.sigBytes=4*f,g.create({key:i,iv:t,salt:o})}},k=n.PasswordBasedCipher=h.extend({cfg:h.cfg.extend({kdf:v}),encrypt:function(e,f,n,o){o=this.cfg.extend(o);var d=o.kdf.execute(n,e.keySize,e.ivSize);o.iv=d.iv;var i=h.encrypt.call(this,e,f,d.key,o);return i.mixIn(d),i},decrypt:function(e,f,n,o){o=this.cfg.extend(o),f=this._parse(f,o.format);var d=o.kdf.execute(n,e.keySize,e.ivSize,f.salt);o.iv=d.iv;var i=h.decrypt.call(this,e,f,d.key,o);return i}})}(),function(){var e=i,f=e.lib,n=f.BlockCipher,o=e.algo,d=[],t=[],l=[],u=[],p=[],s=[],y=[],c=[],r=[],a=[];!function(){for(var e=[],f=0;256>f;f++)128>f?e[f]=f<<1:e[f]=f<<1^283;for(var n=0,o=0,f=0;256>f;f++){var i=o^o<<1^o<<2^o<<3^o<<4;i=i>>>8^255&i^99,d[n]=i,t[i]=n;var w=e[n],b=e[w],g=e[b],m=257*e[i]^16843008*i;l[n]=m<<24|m>>>8,u[n]=m<<16|m>>>16,p[n]=m<<8|m>>>24,s[n]=m;var m=16843009*g^65537*b^257*w^16843008*n;y[i]=m<<24|m>>>8,c[i]=m<<16|m>>>16,r[i]=m<<8|m>>>24,a[i]=m,n?(n=w^e[e[e[g^w]]],o^=e[e[o]]):n=o=1}}();var w=[0,1,2,4,8,16,32,64,128,27,54],b=o.AES=n.extend({_doReset:function(){for(var e=this._key,f=e.words,n=e.sigBytes/4,o=this._nRounds=n+6,i=4*(o+1),t=this._keySchedule=[],l=0;i>l;l++)if(n>l)t[l]=f[l];else{var u=t[l-1];l%n?n>6&&l%n==4&&(u=d[u>>>24]<<24|d[u>>>16&255]<<16|d[u>>>8&255]<<8|d[255&u]):(u=u<<8|u>>>24,u=d[u>>>24]<<24|d[u>>>16&255]<<16|d[u>>>8&255]<<8|d[255&u],u^=w[l/n|0]<<24),t[l]=t[l-n]^u}for(var p=this._invKeySchedule=[],s=0;i>s;s++){var l=i-s;if(s%4)var u=t[l];else var u=t[l-4];4>s||4>=l?p[s]=u:p[s]=y[d[u>>>24]]^c[d[u>>>16&255]]^r[d[u>>>8&255]]^a[d[255&u]]}},encryptBlock:function(e,f){this._doCryptBlock(e,f,this._keySchedule,l,u,p,s,d)},decryptBlock:function(e,f){var n=e[f+1];e[f+1]=e[f+3],e[f+3]=n,this._doCryptBlock(e,f,this._invKeySchedule,y,c,r,a,t);var n=e[f+1];e[f+1]=e[f+3],e[f+3]=n},_doCryptBlock:function(e,f,n,o,d,i,t,l){for(var u=this._nRounds,p=e[f]^n[0],s=e[f+1]^n[1],y=e[f+2]^n[2],c=e[f+3]^n[3],r=4,a=1;u>a;a++){var w=o[p>>>24]^d[s>>>16&255]^i[y>>>8&255]^t[255&c]^n[r++],b=o[s>>>24]^d[y>>>16&255]^i[c>>>8&255]^t[255&p]^n[r++],g=o[y>>>24]^d[c>>>16&255]^i[p>>>8&255]^t[255&s]^n[r++],m=o[c>>>24]^d[p>>>16&255]^i[s>>>8&255]^t[255&y]^n[r++];p=w,s=b,y=g,c=m}var w=(l[p>>>24]<<24|l[s>>>16&255]<<16|l[y>>>8&255]<<8|l[255&c])^n[r++],b=(l[s>>>24]<<24|l[y>>>16&255]<<16|l[c>>>8&255]<<8|l[255&p])^n[r++],g=(l[y>>>24]<<24|l[c>>>16&255]<<16|l[p>>>8&255]<<8|l[255&s])^n[r++],m=(l[c>>>24]<<24|l[p>>>16&255]<<16|l[s>>>8&255]<<8|l[255&y])^n[r++];e[f]=w,e[f+1]=b,e[f+2]=g,e[f+3]=m},keySize:8});e.AES=n._createHelper(b)}(),function(e){function f(e,f,n,o,d,i,t){var l=e+(f&n|~f&o)+d+t;return(l<<i|l>>>32-i)+f}function n(e,f,n,o,d,i,t){var l=e+(f&o|n&~o)+d+t;return(l<<i|l>>>32-i)+f}function o(e,f,n,o,d,i,t){var l=e+(f^n^o)+d+t;return(l<<i|l>>>32-i)+f}function d(e,f,n,o,d,i,t){var l=e+(n^(f|~o))+d+t;return(l<<i|l>>>32-i)+f}var t=i,l=t.lib,u=l.WordArray,p=l.Hasher,s=t.algo,y=[];!function(){for(var f=0;64>f;f++)y[f]=4294967296*e.abs(e.sin(f+1))|0}();var c=s.MD5=p.extend({_doReset:function(){this._hash=new u.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,i){for(var t=0;16>t;t++){var l=i+t,u=e[l];e[l]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}var p=this._hash.words,s=e[i+0],c=e[i+1],r=e[i+2],a=e[i+3],w=e[i+4],b=e[i+5],g=e[i+6],m=e[i+7],x=e[i+8],h=e[i+9],j=e[i+10],v=e[i+11],k=e[i+12],q=e[i+13],z=e[i+14],A=e[i+15],B=p[0],C=p[1],D=p[2],E=p[3];B=f(B,C,D,E,s,7,y[0]),E=f(E,B,C,D,c,12,y[1]),D=f(D,E,B,C,r,17,y[2]),C=f(C,D,E,B,a,22,y[3]),B=f(B,C,D,E,w,7,y[4]),E=f(E,B,C,D,b,12,y[5]),D=f(D,E,B,C,g,17,y[6]),C=f(C,D,E,B,m,22,y[7]),B=f(B,C,D,E,x,7,y[8]),E=f(E,B,C,D,h,12,y[9]),D=f(D,E,B,C,j,17,y[10]),C=f(C,D,E,B,v,22,y[11]),B=f(B,C,D,E,k,7,y[12]),E=f(E,B,C,D,q,12,y[13]),D=f(D,E,B,C,z,17,y[14]),C=f(C,D,E,B,A,22,y[15]),B=n(B,C,D,E,c,5,y[16]),E=n(E,B,C,D,g,9,y[17]),D=n(D,E,B,C,v,14,y[18]),C=n(C,D,E,B,s,20,y[19]),B=n(B,C,D,E,b,5,y[20]),E=n(E,B,C,D,j,9,y[21]),D=n(D,E,B,C,A,14,y[22]),C=n(C,D,E,B,w,20,y[23]),B=n(B,C,D,E,h,5,y[24]),E=n(E,B,C,D,z,9,y[25]),D=n(D,E,B,C,a,14,y[26]),C=n(C,D,E,B,x,20,y[27]),B=n(B,C,D,E,q,5,y[28]),E=n(E,B,C,D,r,9,y[29]),D=n(D,E,B,C,m,14,y[30]),C=n(C,D,E,B,k,20,y[31]),B=o(B,C,D,E,b,4,y[32]),E=o(E,B,C,D,x,11,y[33]),D=o(D,E,B,C,v,16,y[34]),C=o(C,D,E,B,z,23,y[35]),B=o(B,C,D,E,c,4,y[36]),E=o(E,B,C,D,w,11,y[37]),D=o(D,E,B,C,m,16,y[38]),C=o(C,D,E,B,j,23,y[39]),B=o(B,C,D,E,q,4,y[40]),E=o(E,B,C,D,s,11,y[41]),D=o(D,E,B,C,a,16,y[42]),C=o(C,D,E,B,g,23,y[43]),B=o(B,C,D,E,h,4,y[44]),E=o(E,B,C,D,k,11,y[45]),D=o(D,E,B,C,A,16,y[46]),C=o(C,D,E,B,r,23,y[47]),B=d(B,C,D,E,s,6,y[48]),E=d(E,B,C,D,m,10,y[49]),D=d(D,E,B,C,z,15,y[50]),C=d(C,D,E,B,b,21,y[51]),B=d(B,C,D,E,k,6,y[52]),E=d(E,B,C,D,a,10,y[53]),D=d(D,E,B,C,j,15,y[54]),C=d(C,D,E,B,c,21,y[55]),B=d(B,C,D,E,x,6,y[56]),E=d(E,B,C,D,A,10,y[57]),D=d(D,E,B,C,g,15,y[58]),C=d(C,D,E,B,q,21,y[59]),B=d(B,C,D,E,w,6,y[60]),E=d(E,B,C,D,v,10,y[61]),D=d(D,E,B,C,r,15,y[62]),C=d(C,D,E,B,h,21,y[63]),p[0]=p[0]+B|0,p[1]=p[1]+C|0,p[2]=p[2]+D|0,p[3]=p[3]+E|0},_doFinalize:function(){var f=this._data,n=f.words,o=8*this._nDataBytes,d=8*f.sigBytes;n[d>>>5]|=128<<24-d%32;var i=e.floor(o/4294967296),t=o;n[(d+64>>>9<<4)+15]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),n[(d+64>>>9<<4)+14]=16711935&(t<<8|t>>>24)|4278255360&(t<<24|t>>>8),f.sigBytes=4*(n.length+1),this._process();for(var l=this._hash,u=l.words,p=0;4>p;p++){var s=u[p];u[p]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}return l},clone:function(){var e=p.clone.call(this);return e._hash=this._hash.clone(),e}});t.MD5=p._createHelper(c),t.HmacMD5=p._createHmacHelper(c)}(Math),function(){var e=i,f=e.lib,n=f.WordArray,o=f.Hasher,d=e.algo,t=[],l=d.SHA1=o.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,f){for(var n=this._hash.words,o=n[0],d=n[1],i=n[2],l=n[3],u=n[4],p=0;80>p;p++){if(16>p)t[p]=0|e[f+p];else{var s=t[p-3]^t[p-8]^t[p-14]^t[p-16];t[p]=s<<1|s>>>31}var y=(o<<5|o>>>27)+u+t[p];y+=20>p?(d&i|~d&l)+1518500249:40>p?(d^i^l)+1859775393:60>p?(d&i|d&l|i&l)-1894007588:(d^i^l)-899497514,u=l,l=i,i=d<<30|d>>>2,d=o,o=y}n[0]=n[0]+o|0,n[1]=n[1]+d|0,n[2]=n[2]+i|0,n[3]=n[3]+l|0,n[4]=n[4]+u|0},_doFinalize:function(){var e=this._data,f=e.words,n=8*this._nDataBytes,o=8*e.sigBytes;return f[o>>>5]|=128<<24-o%32,f[(o+64>>>9<<4)+14]=Math.floor(n/4294967296),f[(o+64>>>9<<4)+15]=n,e.sigBytes=4*f.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=o._createHelper(l),e.HmacSHA1=o._createHmacHelper(l)}(),function(e){var f=i,n=f.lib,o=n.Base,d=n.WordArray,t=f.x64={};t.Word=o.extend({init:function(e,f){this.high=e,this.low=f}}),t.WordArray=o.extend({init:function(f,n){f=this.words=f||[],n!=e?this.sigBytes=n:this.sigBytes=8*f.length},toX32:function(){for(var e=this.words,f=e.length,n=[],o=0;f>o;o++){var i=e[o];n.push(i.high),n.push(i.low)}return d.create(n,this.sigBytes)},clone:function(){for(var e=o.clone.call(this),f=e.words=this.words.slice(0),n=f.length,d=0;n>d;d++)f[d]=f[d].clone();return e}})}(),function(e){var f=i,n=f.lib,o=n.WordArray,d=n.Hasher,t=f.algo,l=[],u=[];!function(){function f(f){for(var n=e.sqrt(f),o=2;n>=o;o++)if(!(f%o))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var o=2,d=0;64>d;)f(o)&&(8>d&&(l[d]=n(e.pow(o,.5))),u[d]=n(e.pow(o,1/3)),d++),o++}();var p=[],s=t.SHA256=d.extend({_doReset:function(){this._hash=new o.init(l.slice(0))},_doProcessBlock:function(e,f){for(var n=this._hash.words,o=n[0],d=n[1],i=n[2],t=n[3],l=n[4],s=n[5],y=n[6],c=n[7],r=0;64>r;r++){if(16>r)p[r]=0|e[f+r];else{var a=p[r-15],w=(a<<25|a>>>7)^(a<<14|a>>>18)^a>>>3,b=p[r-2],g=(b<<15|b>>>17)^(b<<13|b>>>19)^b>>>10;p[r]=w+p[r-7]+g+p[r-16]}var m=l&s^~l&y,x=o&d^o&i^d&i,h=(o<<30|o>>>2)^(o<<19|o>>>13)^(o<<10|o>>>22),j=(l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25),v=c+j+m+u[r]+p[r],k=h+x;c=y,y=s,s=l,l=t+v|0,t=i,i=d,d=o,o=v+k|0}n[0]=n[0]+o|0,n[1]=n[1]+d|0,n[2]=n[2]+i|0,n[3]=n[3]+t|0,n[4]=n[4]+l|0,n[5]=n[5]+s|0,n[6]=n[6]+y|0,n[7]=n[7]+c|0},_doFinalize:function(){var f=this._data,n=f.words,o=8*this._nDataBytes,d=8*f.sigBytes;return n[d>>>5]|=128<<24-d%32,n[(d+64>>>9<<4)+14]=e.floor(o/4294967296),n[(d+64>>>9<<4)+15]=o,f.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=d.clone.call(this);return e._hash=this._hash.clone(),e}});f.SHA256=d._createHelper(s),f.HmacSHA256=d._createHmacHelper(s)}(Math),function(){function e(){return t.create.apply(t,arguments)}var f=i,n=f.lib,o=n.Hasher,d=f.x64,t=d.Word,l=d.WordArray,u=f.algo,p=[e(1116352408,3609767458),e(1899447441,602891725),e(3049323471,3964484399),e(3921009573,2173295548),e(961987163,4081628472),e(1508970993,3053834265),e(2453635748,2937671579),e(2870763221,3664609560),e(3624381080,2734883394),e(310598401,1164996542),e(607225278,1323610764),e(1426881987,3590304994),e(1925078388,4068182383),e(2162078206,991336113),e(2614888103,633803317),e(3248222580,3479774868),e(3835390401,2666613458),e(4022224774,944711139),e(264347078,2341262773),e(604807628,2007800933),e(770255983,1495990901),e(1249150122,1856431235),e(1555081692,3175218132),e(1996064986,2198950837),e(2554220882,3999719339),e(2821834349,766784016),e(2952996808,2566594879),e(3210313671,3203337956),e(3336571891,1034457026),e(3584528711,2466948901),e(113926993,3758326383),e(338241895,168717936),e(666307205,1188179964),e(773529912,1546045734),e(1294757372,1522805485),e(1396182291,2643833823),e(1695183700,2343527390),e(1986661051,1014477480),e(2177026350,1206759142),e(2456956037,344077627),e(2730485921,1290863460),e(2820302411,3158454273),e(3259730800,3505952657),e(3345764771,106217008),e(3516065817,3606008344),e(3600352804,1432725776),e(4094571909,1467031594),e(275423344,851169720),e(430227734,3100823752),e(506948616,1363258195),e(659060556,3750685593),e(883997877,3785050280),e(958139571,3318307427),e(1322822218,3812723403),e(1537002063,2003034995),e(1747873779,3602036899),e(1955562222,1575990012),e(2024104815,1125592928),e(2227730452,2716904306),e(2361852424,442776044),e(2428436474,593698344),e(2756734187,3733110249),e(3204031479,2999351573),e(3329325298,3815920427),e(3391569614,3928383900),e(3515267271,566280711),e(3940187606,3454069534),e(4118630271,4000239992),e(116418474,1914138554),e(174292421,2731055270),e(289380356,3203993006),e(460393269,320620315),e(685471733,587496836),e(852142971,1086792851),e(1017036298,365543100),e(1126000580,2618297676),e(1288033470,3409855158),e(1501505948,4234509866),e(1607167915,987167468),e(1816402316,1246189591)],s=[];!function(){for(var f=0;80>f;f++)s[f]=e()}();var y=u.SHA512=o.extend({_doReset:function(){this._hash=new l.init([new t.init(1779033703,4089235720),new t.init(3144134277,2227873595),new t.init(1013904242,4271175723),new t.init(2773480762,1595750129),new t.init(1359893119,2917565137),new t.init(2600822924,725511199),new t.init(528734635,4215389547),new t.init(1541459225,327033209)])},_doProcessBlock:function(e,f){for(var n=this._hash.words,o=n[0],d=n[1],i=n[2],t=n[3],l=n[4],u=n[5],y=n[6],c=n[7],r=o.high,a=o.low,w=d.high,b=d.low,g=i.high,m=i.low,x=t.high,h=t.low,j=l.high,v=l.low,k=u.high,q=u.low,z=y.high,A=y.low,B=c.high,C=c.low,D=r,E=a,F=w,G=b,H=g,I=m,J=x,K=h,L=j,M=v,N=k,O=q,P=z,Q=A,R=B,S=C,T=0;80>T;T++){var U=s[T];if(16>T)var V=U.high=0|e[f+2*T],W=U.low=0|e[f+2*T+1];else{var X=s[T-15],Y=X.high,Z=X.low,$=(Y>>>1|Z<<31)^(Y>>>8|Z<<24)^Y>>>7,_=(Z>>>1|Y<<31)^(Z>>>8|Y<<24)^(Z>>>7|Y<<25),ee=s[T-2],fe=ee.high,ne=ee.low,oe=(fe>>>19|ne<<13)^(fe<<3|ne>>>29)^fe>>>6,de=(ne>>>19|fe<<13)^(ne<<3|fe>>>29)^(ne>>>6|fe<<26),ie=s[T-7],te=ie.high,le=ie.low,ue=s[T-16],pe=ue.high,se=ue.low,W=_+le,V=$+te+(_>>>0>W>>>0?1:0),W=W+de,V=V+oe+(de>>>0>W>>>0?1:0),W=W+se,V=V+pe+(se>>>0>W>>>0?1:0);U.high=V,U.low=W}var ye=L&N^~L&P,ce=M&O^~M&Q,re=D&F^D&H^F&H,ae=E&G^E&I^G&I,we=(D>>>28|E<<4)^(D<<30|E>>>2)^(D<<25|E>>>7),be=(E>>>28|D<<4)^(E<<30|D>>>2)^(E<<25|D>>>7),ge=(L>>>14|M<<18)^(L>>>18|M<<14)^(L<<23|M>>>9),me=(M>>>14|L<<18)^(M>>>18|L<<14)^(M<<23|L>>>9),xe=p[T],he=xe.high,je=xe.low,ve=S+me,ke=R+ge+(S>>>0>ve>>>0?1:0),ve=ve+ce,ke=ke+ye+(ce>>>0>ve>>>0?1:0),ve=ve+je,ke=ke+he+(je>>>0>ve>>>0?1:0),ve=ve+W,ke=ke+V+(W>>>0>ve>>>0?1:0),qe=be+ae,ze=we+re+(be>>>0>qe>>>0?1:0);R=P,S=Q,P=N,Q=O,N=L,O=M,M=K+ve|0,L=J+ke+(K>>>0>M>>>0?1:0)|0,J=H,K=I,H=F,I=G,F=D,G=E,E=ve+qe|0,D=ke+ze+(ve>>>0>E>>>0?1:0)|0}a=o.low=a+E,o.high=r+D+(E>>>0>a>>>0?1:0),b=d.low=b+G,d.high=w+F+(G>>>0>b>>>0?1:0),m=i.low=m+I,i.high=g+H+(I>>>0>m>>>0?1:0),h=t.low=h+K,t.high=x+J+(K>>>0>h>>>0?1:0),v=l.low=v+M,l.high=j+L+(M>>>0>v>>>0?1:0),q=u.low=q+O,u.high=k+N+(O>>>0>q>>>0?1:0),A=y.low=A+Q,y.high=z+P+(Q>>>0>A>>>0?1:0),C=c.low=C+S,c.high=B+R+(S>>>0>C>>>0?1:0)},_doFinalize:function(){var e=this._data,f=e.words,n=8*this._nDataBytes,o=8*e.sigBytes;f[o>>>5]|=128<<24-o%32,f[(o+128>>>10<<5)+30]=Math.floor(n/4294967296),f[(o+128>>>10<<5)+31]=n,e.sigBytes=4*f.length,this._process();var d=this._hash.toX32();return d},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});f.SHA512=o._createHelper(y),f.HmacSHA512=o._createHmacHelper(y)}(),function(e){var f=i,n=f.lib,o=n.WordArray,d=n.Hasher,t=f.x64,l=t.Word,u=f.algo,p=[],s=[],y=[];!function(){for(var e=1,f=0,n=0;24>n;n++){p[e+5*f]=(n+1)*(n+2)/2%64;var o=f%5,d=(2*e+3*f)%5;e=o,f=d}for(var e=0;5>e;e++)for(var f=0;5>f;f++)s[e+5*f]=f+(2*e+3*f)%5*5;for(var i=1,t=0;24>t;t++){for(var u=0,c=0,r=0;7>r;r++){if(1&i){var a=(1<<r)-1;32>a?c^=1<<a:u^=1<<a-32}128&i?i=i<<1^113:i<<=1}y[t]=l.create(u,c)}}();var c=[];!function(){for(var e=0;25>e;e++)c[e]=l.create()}();var r=u.SHA3=d.extend({cfg:d.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],f=0;25>f;f++)e[f]=new l.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,f){for(var n=this._state,o=this.blockSize/2,d=0;o>d;d++){var i=e[f+2*d],t=e[f+2*d+1];i=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),t=16711935&(t<<8|t>>>24)|4278255360&(t<<24|t>>>8);var l=n[d];l.high^=t,l.low^=i}for(var u=0;24>u;u++){for(var r=0;5>r;r++){for(var a=0,w=0,b=0;5>b;b++){var l=n[r+5*b];a^=l.high,w^=l.low}var g=c[r];g.high=a,g.low=w}for(var r=0;5>r;r++)for(var m=c[(r+4)%5],x=c[(r+1)%5],h=x.high,j=x.low,a=m.high^(h<<1|j>>>31),w=m.low^(j<<1|h>>>31),b=0;5>b;b++){var l=n[r+5*b];l.high^=a,l.low^=w}for(var v=1;25>v;v++){var l=n[v],k=l.high,q=l.low,z=p[v];if(32>z)var a=k<<z|q>>>32-z,w=q<<z|k>>>32-z;else var a=q<<z-32|k>>>64-z,w=k<<z-32|q>>>64-z;var A=c[s[v]];A.high=a,A.low=w}var B=c[0],C=n[0];B.high=C.high,B.low=C.low;for(var r=0;5>r;r++)for(var b=0;5>b;b++){var v=r+5*b,l=n[v],D=c[v],E=c[(r+1)%5+5*b],F=c[(r+2)%5+5*b];l.high=D.high^~E.high&F.high,l.low=D.low^~E.low&F.low}var l=n[0],G=y[u];l.high^=G.high,l.low^=G.low}},_doFinalize:function(){var f=this._data,n=f.words,d=(8*this._nDataBytes,8*f.sigBytes),i=32*this.blockSize;n[d>>>5]|=1<<24-d%32,n[(e.ceil((d+1)/i)*i>>>5)-1]|=128,f.sigBytes=4*n.length,this._process();for(var t=this._state,l=this.cfg.outputLength/8,u=l/8,p=[],s=0;u>s;s++){var y=t[s],c=y.high,r=y.low;c=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8),r=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),p.push(r),p.push(c)}return new o.init(p,l)},clone:function(){for(var e=d.clone.call(this),f=e._state=this._state.slice(0),n=0;25>n;n++)f[n]=f[n].clone();return e}});f.SHA3=d._createHelper(r),f.HmacSHA3=d._createHmacHelper(r)}(Math),d("undefined"!=typeof i?i:window.CryptoJS)}.call(n,void 0,void 0,void 0,void 0,function(e){f.exports=e})}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,f,n){(function(n){__browserify_shim_require__=e,function(e,f,n,o,d){var i=function(e,f){if(!(this instanceof i))return new i(e,f);if(!JSON)throw"JSON unavailable! Include http://www.json.org/json2.js to fix.";if(!(arguments.length<=2&&arguments.length>0))throw"Incorrect # of ctor args!";if(f="function"==typeof arguments[0]?arguments[0]:arguments[1],e="function"==typeof arguments[0]?{}:arguments[0],"function"!=typeof f)throw"No callback was provided";this.record=e.record||"record",this.name=e.name||"records";var n;if(e.adapter){"string"==typeof e.adapter&&(e.adapter=[e.adapter]);for(var o=0,d=e.adapter.length;d>o;o++){for(var t=i.adapters.length-1;t>=0&&(i.adapters[t].adapter!==e.adapter[o]||!(n=i.adapters[t].valid()?i.adapters[t]:void 0));t--);if(n)break}}else for(var t=0,l=i.adapters.length;l>t&&!(n=i.adapters[t].valid()?i.adapters[t]:void 0);t++);if(!n)throw"No valid adapter.";for(var o in n)this[o]=n[o];for(var t=0,l=i.plugins.length;l>t;t++)i.plugins[t].call(this);this.init(e,f)};i.adapters=[],i.adapter=function(e,f){f.adapter=e;var n="adapter valid init keys save batch get exists all remove nuke".split(" "),o=this.prototype.indexOf;for(var d in f)if(-1===o(n,d))throw"Invalid adapter! Nonstandard method: "+d;i.adapters.splice(0,0,f)},i.plugins=[],i.plugin=function(e){for(var f in e)"init"===f?i.plugins.push(e[f]):this.prototype[f]=e[f]},i.prototype={isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},indexOf:function(e,f,n,o){if(e.indexOf)return e.indexOf(f);for(n=0,o=e.length;o>n;n++)if(e[n]===f)return n;return-1},lambda:function(e){return this.fn(this.record,e)},fn:function(e,f){return"string"==typeof f?new Function(e,f):f},uuid:function(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},each:function(e){var f=this.lambda(e);if(this.__results)for(var n=0,o=this.__results.length;o>n;n++)f.call(this,this.__results[n],n);else this.all(function(e){for(var n=0,o=e.length;o>n;n++)f.call(this,e[n],n)});return this}},i.adapter("window-name",function(){"undefined"==typeof window&&(window={top:{}});var e={};try{e=JSON.parse(window.top.name)}catch(f){}return{valid:function(){return"undefined"!=typeof window.top.name},init:function(f,n){return e[this.name]=e[this.name]||{index:[],store:{}},this.index=e[this.name].index,this.store=e[this.name].store,this.fn(this.name,n).call(this,this),this},keys:function(e){return this.fn("keys",e).call(this,this.index),this},save:function(f,n){var o=f.key||this.uuid();return this.exists(o,function(d){d||(f.key&&delete f.key,this.index.push(o)),this.store[o]=f;try{window.top.name=JSON.stringify(e)}catch(i){throw d||(this.index.pop(),delete this.store[o]),i}n&&(f.key=o,this.lambda(n).call(this,f))}),this},batch:function(e,f){for(var n=[],o=0,d=e.length;d>o;o++)this.save(e[o],function(e){n.push(e)});return f&&this.lambda(f).call(this,n),this},get:function(e,f){var n;if(this.isArray(e)){n=[];for(var o=0,d=e.length;d>o;o++)n.push(this.store[e[o]])}else n=this.store[e],n&&(n.key=e);return f&&this.lambda(f).call(this,n),this},exists:function(e,f){return this.lambda(f).call(this,!!this.store[e]),this},all:function(e){for(var f=[],n=0,o=this.index.length;o>n;n++){var d=this.store[this.index[n]];d.key=this.index[n],f.push(d)}return this.fn(this.name,e).call(this,f),this},remove:function(f,n){for(var o=this.isArray(f)?f:[f],d=0,i=o.length;i>d;d++){var t=o[d].key?o[d].key:o[d],l=this.indexOf(this.index,t);0>l||(delete this.store[t],this.index.splice(l,1))}return window.top.name=JSON.stringify(e),n&&this.lambda(n).call(this),this},nuke:function(f){return this.store=e[this.name].store={},this.index=e[this.name].index=[],window.top.name=JSON.stringify(e),f&&this.lambda(f).call(this),this}}}()),i.adapter("dom",function(){var e=null;try{e=window.localStorage}catch(f){}var n=function(f){return{key:f+"._index_",all:function(){var f=e.getItem(this.key);return f&&(f=JSON.parse(f)),null===f&&e.setItem(this.key,JSON.stringify([])),JSON.parse(e.getItem(this.key))},add:function(f){var n=this.all();n.push(f),e.setItem(this.key,JSON.stringify(n))},del:function(f){for(var n=this.all(),o=[],d=0,i=n.length;i>d;d++)n[d]!=f&&o.push(n[d]);e.setItem(this.key,JSON.stringify(o))},find:function(e){for(var f=this.all(),n=0,o=f.length;o>n;n++)if(e===f[n])return n;return!1}}};return{valid:function(){return!!e&&function(){var f=!0,n=Math.random();try{e.setItem(n,n)}catch(o){f=!1}return e.removeItem(n),f}()},init:function(e,f){this.indexer=n(this.name),f&&this.fn(this.name,f).call(this,this)},save:function(f,n){var o=f.key?this.name+"."+f.key:this.name+"."+this.uuid();return delete f.key,e.setItem(o,JSON.stringify(f)),this.indexer.find(o)===!1&&this.indexer.add(o),f.key=o.slice(this.name.length+1),n&&this.lambda(n).call(this,f),this},batch:function(e,f){for(var n=[],o=0,d=e.length;d>o;o++)this.save(e[o],function(e){n.push(e)});return f&&this.lambda(f).call(this,n),this},keys:function(e){if(e){var f=this.name,n=this.indexer.all(),o=[];if(Array.prototype.map)o=n.map(function(e){return e.replace(f+".","")});else for(var d in n)o.push(d.replace(f+".",""));this.fn("keys",e).call(this,o)}return this},get:function(f,n){if(this.isArray(f)){for(var o=[],d=0,i=f.length;i>d;d++){var t=this.name+"."+f[d],l=e.getItem(t);l&&(l=JSON.parse(l),l.key=f[d]),o.push(l)}n&&this.lambda(n).call(this,o)}else{var t=this.name+"."+f,l=e.getItem(t);l&&(l=JSON.parse(l),l.key=f),n&&this.lambda(n).call(this,l)}return this},exists:function(e,f){var n=this.indexer.find(this.name+"."+e)===!1?!1:!0;return this.lambda(f).call(this,n),this},all:function(f){for(var n,o,d=this.indexer.all(),i=[],t=0,l=d.length;l>t;t++)o=d[t],n=JSON.parse(e.getItem(o)),n.key=o.replace(this.name+".",""),i.push(n);return f&&this.fn(this.name,f).call(this,i),this},remove:function(f,n){var o=this;if(this.isArray(f)){var d,i=f.length,t=function(e){o.remove(f[e],function(){--i>0||n&&o.lambda(n).call(o)})};for(d=0;d<f.length;d++)t(d);return this}var l=this.name+"."+(f.key?f.key:f);return this.indexer.del(l),e.removeItem(l),n&&this.lambda(n).call(this),this},nuke:function(e){return this.all(function(f){for(var n=0,o=f.length;o>n;n++)this.remove(f[n]);e&&this.lambda(e).call(this)}),this}}}()),i.adapter("webkit-sqlite",function(){var e=function(e,f){console&&console.log("error in sqlite adaptor!",e,f)},f=function(){return new Date};return{valid:function(){return!!window.openDatabase},init:function(f,n){var o=this,d=o.fn(o.name,n),i="CREATE TABLE IF NOT EXISTS "+this.record+" (id NVARCHAR(32) UNIQUE PRIMARY KEY, value TEXT, timestamp REAL)",t=function(){return d.call(o,o)};f&&"function"==typeof f.fail&&(e=f.fail),this.db=openDatabase(this.name,"1.0.0",this.name,65536),this.db.transaction(function(f){f.executeSql(i,[],t,e)})},keys:function(f){var n=this.lambda(f),o=this,d="SELECT id FROM "+this.record+" ORDER BY timestamp DESC";return this.db.readTransaction(function(f){var i=function(e,f){if(0==f.rows.length)n.call(o,[]);else{for(var d=[],i=0,t=f.rows.length;t>i;i++)d.push(f.rows.item(i).id);n.call(o,d)}};f.executeSql(d,[],i,e)}),this},save:function(n,o,d){var i=this;objs=(this.isArray(n)?n:[n]).map(function(e){return e.key||(e.key=i.uuid()),e}),ins="INSERT OR REPLACE INTO "+this.record+" (value, timestamp, id) VALUES (?,?,?)",win=function(){o&&i.lambda(o).call(i,i.isArray(n)?objs:objs[0])},d=d||function(){},insvals=[],ts=f();try{for(var t=0,l=objs.length;l>t;t++)insvals[t]=[JSON.stringify(objs[t]),ts,objs[t].key]}catch(u){throw e(u),u}return i.db.transaction(function(e){for(var f=0,n=objs.length;n>f;f++)e.executeSql(ins,insvals[f])},function(f,n){e(f,n)},win),this},batch:function(e,f){return this.save(e,f)},get:function(f,n){var o=this,d="",i=this.isArray(f)?f:[f];d="SELECT id, value FROM "+this.record+" WHERE id IN ("+i.map(function(){return"?"}).join(",")+")";var t=function(e,d){for(var t,l,u={},p=0,s=d.rows.length;s>p;p++)t=JSON.parse(d.rows.item(p).value),t.key=d.rows.item(p).id,u[t.key]=t;l=i.map(function(e){return u[e]}),o.isArray(f)||(l=l.length?l[0]:null),n&&o.lambda(n).call(o,l)};return this.db.readTransaction(function(f){f.executeSql(d,i,t,e)}),this},exists:function(f,n){var o="SELECT * FROM "+this.record+" WHERE id = ?",d=this,i=function(e,f){n&&d.fn("exists",n).call(d,f.rows.length>0)};return this.db.readTransaction(function(n){n.executeSql(o,[f],i,e);
}),this},all:function(f){var n=this,o="SELECT * FROM "+this.record,d=[],i=this.fn(this.name,f)||void 0,t=function(e,f){if(0!=f.rows.length)for(var o=0,t=f.rows.length;t>o;o++){var l=JSON.parse(f.rows.item(o).value);l.key=f.rows.item(o).id,d.push(l)}i&&i.call(n,d)};return this.db.readTransaction(function(f){f.executeSql(o,[],t,e)}),this},remove:function(f,n){var o,d=this,i="DELETE FROM "+this.record+" WHERE id ",t=function(){n&&d.lambda(n).call(d)};return this.isArray(f)?(o=f,i+="IN ("+o.map(function(){return"?"}).join(",")+")"):(i+="= ?",o=[f]),o=o.map(function(e){return e.key?e.key:e}),this.db.transaction(function(f){f.executeSql(i,o,t,e)}),this},nuke:function(f){var n="DELETE FROM "+this.record,o=this,d=f?function(){o.lambda(f).call(o)}:function(){};return this.db.transaction(function(f){f.executeSql(n,[],d,e)}),this}}}()),i.adapter("indexed-db",function(){function e(e,f){console&&console.log("error in indexed-db adapter!"+e.message,e,f)}function f(){return window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.oIndexedDB||window.msIndexedDB}return{valid:function(){return!!f()},init:function(n,o){this.idb=f(),this.waiting=[];var d=this.idb.open(this.name,2),i=this,t=i.fn(i.name,o),l=function(){return t.call(i,i)};n&&"function"==typeof n.fail&&(e=n.fail),d.onupgradeneeded=function(e){i.store=d.result.createObjectStore("teststore",{autoIncrement:!0});for(var f=0;f<i.waiting.length;f++)i.waiting[f].call(i);i.waiting=[],l()},d.onsuccess=function(f){if(i.db=d.result,"2.0"!=i.db.version){if("function"==typeof i.db.setVersion){var n=i.db.setVersion("2.0");n.onsuccess=function(e){i.store=i.db.createObjectStore("teststore",{autoIncrement:!0});for(var f=0;f<i.waiting.length;f++)i.waiting[f].call(i);i.waiting=[],l()},n.onerror=function(f){e(f)}}}else{i.store={};for(var o=0;o<i.waiting.length;o++)i.waiting[o].call(i);i.waiting=[],l()}},d.onerror=e},save:function(f,n){if(!this.store)return void this.waiting.push(function(){this.save(f,n)});var o=this,d=function(e){n&&(f.key=e.target.result,o.lambda(n).call(o,f))},i="readwrite",t=this.db.transaction(["teststore"],i),l=t.objectStore("teststore"),u=f.key?l.put(f,f.key):l.put(f);return u.onsuccess=d,u.onerror=e,this},batch:function(e,f){for(var n=[],o=!1,d=this,i=function(f){n.push(f),o=n.length===e.length},t=setInterval(function(){o&&(f&&d.lambda(f).call(d,n),clearInterval(t))},200),l=0,u=e.length;u>l;l++)this.save(e[l],i);return this},get:function(f,n){if(!this.store||!this.db)return void this.waiting.push(function(){this.get(f,n)});var o=this,d=function(e){n&&o.lambda(n).call(o,e.target.result)};if(this.isArray(f))for(var i=[],t=!1,l=f,u=function(e){i.push(e),t=i.length===l.length},p=setInterval(function(){t&&(n&&o.lambda(n).call(o,i),clearInterval(p))},200),s=0,y=l.length;y>s;s++)this.get(l[s],u);else{var c=this.db.transaction("teststore").objectStore("teststore").get(f);c.onsuccess=d,c.onerror=function(f){e(f)}}return this},all:function(e){if(!this.store)return void this.waiting.push(function(){this.all(e)});var f=this.fn(this.name,e)||void 0,n=this,o=this.db.transaction("teststore").objectStore("teststore"),d=[];return o.openCursor().onsuccess=function(e){var o=e.target.result;o?(d.push(o.value),o["continue"]()):f&&f.call(n,d)},this},remove:function(f,n){if(!this.store)return void this.waiting.push(function(){this.remove(f,n)});"object"==typeof f&&(f=f.key);var o=this,d=function(){n&&o.lambda(n).call(o)},i=this.db.transaction(["teststore"],"readwrite").objectStore("teststore")["delete"](f);return i.onsuccess=d,i.onerror=e,this},nuke:function(f){if(!this.store)return void this.waiting.push(function(){this.nuke(f)});var n=this,o=f?function(){n.lambda(f).call(n)}:function(){};try{this.db.transaction(["teststore"],"readwrite").objectStore("teststore").clear().onsuccess=o}catch(d){e()}return this}}}()),i.adapter("html5-filesystem",function(e){var f=function(e){console&&console.error(e,e.name)},n=function(e,o,d){var i=d||[];e.readEntries(function(f){f.length?n(e,o,i.concat(Array.prototype.slice.call(f))):o&&o(i.map(function(e){return e.name}))},f)},o={},d=function(e,f){var n=o[e.name];n?f(n):setTimeout(function(){d(e,f)},10)},i=function(){var e=-1===document.URL.indexOf("http://")&&-1===document.URL.indexOf("https://");return e?!0:!1},t=function(e){var f;if(i())f=e;else{var n="application/json";try{f=new Blob([e],{type:n})}catch(o){var d=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if("TypeError"==o.name&&d){var t=new d;t.append([e.buffer]),f=t.getBlob(n)}else f=e}}return f};return{valid:function(){var f=e.requestFileSystem||e.webkitRequestFileSystem||e.moz_requestFileSystem;return!!f},init:function(n,d){function i(f){var n=e.requestFileSystem||e.webkitRequestFileSystem||e.moz_requestFileSystem,i=window.PERSISTENT;"undefined"!=typeof LocalFileSystem&&"undefined"!=typeof LocalFileSystem.PERSISTENT&&(i=LocalFileSystem.PERSISTENT),n(i,f,function(e){e.root.getDirectory(p,{create:!0},function(e){o[p]=e,d&&t.fn(t.name,d).call(t,t)},function(e){l(e)})},function(e){l(e)})}var t=this,l=function(e){f(e),d&&t.fn(t.name,d).call(t,t)},u=n.size||104857600,p=this.name;t.backup=!1,"undefined"!=typeof n.backup&&(t.backup=n.backup),"undefined"!=typeof navigator.webkitPersistentStorage?navigator.webkitPersistentStorage.requestQuota(u,i,function(){logger.warn("User declined file storage"),l("User declined file storage")}):i(0)},keys:function(e){var f=this;return d(this,function(o){n(o.createReader(),function(n){e&&f.fn("keys",e).call(f,n)})}),this},save:function(e,n){var o=this,i=e.key||this.uuid();e.key=i;var l=function(e){f(e),n&&o.lambda(n).call(o)};return d(this,function(f){var d=function(f,d){f.createWriter(function(f){f.onerror=d,f.onwriteend=function(){this.onwriteend=null,this.truncate(this.position),n&&o.lambda(n).call(o,e)};var i=JSON.stringify(e),l=t(i);f.write(l)},d)};f.getFile(i,{create:!0},function(e){"function"!=typeof e.setMetadata||o.backup!==!1&&"false"!==o.backup?d(e,l):e.setMetadata(function(){d(e,l)},function(){d(e,l)},{"com.apple.MobileBackup":1})},l)}),this},batch:function(e,f){for(var n=this,o=[],d=0,i=e.length;i>d;d++)n.save(e[d],function(e){o.push(e),o.length===i&&f&&n.lambda(f).call(n,o)});return this},get:function(e,n){var o=this;if(this.isArray(e))for(var i=[],t=0,l=e.length;l>t;t++)o.get(e[t],function(e){e&&i.push(e),i.length===l&&n&&o.lambda(n).call(o,i)});else{var u=function(e){f(e),n&&o.lambda(n).call(o)};d(this,function(f){f.getFile(e,{create:!1},function(f){f.file(function(f){var d=new FileReader;d.onerror=u,d.onload=function(f){var d={};try{d=JSON.parse(f.target.result),d.key=e}catch(f){d={key:e}}n&&o.lambda(n).call(o,d)},d.readAsText(f)},u)},u)})}return this},exists:function(e,f){var n=this;return d(this,function(o){o.getFile(e,{create:!1},function(){f&&n.lambda(f).call(n,!0)},function(){f&&n.lambda(f).call(n,!1)})}),this},all:function(e){var f=this;return e&&this.keys(function(n){n.length?f.get(n,function(n){f.fn(f.name,e).call(f,n)}):f.fn(f.name,e).call(f,[])}),this},remove:function(e,n){var o=this,i=function(e){f(e),n&&o.lambda(n).call(o)};return d(this,function(f){f.getFile("string"==typeof e?e:e.key,{create:!1},function(e){e.remove(function(){n&&o.lambda(n).call(o)},i)},i)}),this},nuke:function(e){var f=this,n=0;return this.keys(function(o){if(o.length)for(var d=0,i=o.length;i>d;d++)f.remove(o[d],function(){n++,n===i&&e&&f.lambda(e).call(f)});else e&&f.lambda(e).call(f)}),this}}}(this)),i.adapter("memory",function(){var e={};return{valid:function(){return!0},init:function(f,n){e[this.name]=e[this.name]||{index:[],store:{}},this.index=e[this.name].index,this.store=e[this.name].store;var o=this.fn(this.name,n);return o&&o.call(this,this),this},keys:function(e){return this.fn("keys",e).call(this,this.index),this},save:function(e,f){var n=e.key||this.uuid();return this.exists(n,function(o){o||(e.key&&delete e.key,this.index.push(n)),this.store[n]=e,f&&(e.key=n,this.lambda(f).call(this,e))}),this},batch:function(e,f){for(var n=[],o=0,d=e.length;d>o;o++)this.save(e[o],function(e){n.push(e)});return f&&this.lambda(f).call(this,n),this},get:function(e,f){var n;if(this.isArray(e)){n=[];for(var o=0,d=e.length;d>o;o++)n.push(this.store[e[o]])}else n=this.store[e],n&&(n.key=e);return f&&this.lambda(f).call(this,n),this},exists:function(e,f){return this.lambda(f).call(this,!!this.store[e]),this},all:function(e){for(var f=[],n=0,o=this.index.length;o>n;n++){var d=this.store[this.index[n]];d.key=this.index[n],f.push(d)}return this.fn(this.name,e).call(this,f),this},remove:function(e,f){for(var n=this.isArray(e)?e:[e],o=0,d=n.length;d>o;o++){var i=n[o].key?n[o].key:n[o],t=this.indexOf(this.index,i);0>t||(delete this.store[i],this.index.splice(t,1))}return f&&this.lambda(f).call(this),this},nuke:function(f){return this.store=e[this.name].store={},this.index=e[this.name].index=[],f&&this.lambda(f).call(this),this}}}()),d("undefined"!=typeof i?i:window.Lawnchair)}.call(n,void 0,void 0,void 0,void 0,function(e){f.exports=e})}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,f,n){function o(e,f,n){null!=e&&("number"==typeof e?this.fromNumber(e,f,n):null==f&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,f))}function d(){return new o(null)}function i(e,f,n,o,d,i){for(;--i>=0;){var t=f*this[e++]+n[o]+d;d=Math.floor(t/67108864),n[o++]=67108863&t}return d}function t(e,f,n,o,d,i){for(var t=32767&f,l=f>>15;--i>=0;){var u=32767&this[e],p=this[e++]>>15,s=l*u+p*t;u=t*u+((32767&s)<<15)+n[o]+(1073741823&d),d=(u>>>30)+(s>>>15)+l*p+(d>>>30),n[o++]=1073741823&u}return d}function l(e,f,n,o,d,i){for(var t=16383&f,l=f>>14;--i>=0;){var u=16383&this[e],p=this[e++]>>14,s=l*u+p*t;u=t*u+((16383&s)<<14)+n[o]+d,d=(u>>28)+(s>>14)+l*p,n[o++]=268435455&u}return d}function u(e){return ae.charAt(e)}function p(e,f){var n=we[e.charCodeAt(f)];return null==n?-1:n}function s(e){for(var f=this.t-1;f>=0;--f)e[f]=this[f];e.t=this.t,e.s=this.s}function y(e){this.t=1,this.s=0>e?-1:0,e>0?this[0]=e:-1>e?this[0]=e+DV:this.t=0}function c(e){var f=d();return f.fromInt(e),f}function r(e,f){var n;if(16==f)n=4;else if(8==f)n=3;else if(256==f)n=8;else if(2==f)n=1;else if(32==f)n=5;else{if(4!=f)return void this.fromRadix(e,f);n=2}this.t=0,this.s=0;for(var d=e.length,i=!1,t=0;--d>=0;){var l=8==n?255&e[d]:p(e,d);0>l?"-"==e.charAt(d)&&(i=!0):(i=!1,0==t?this[this.t++]=l:t+n>this.DB?(this[this.t-1]|=(l&(1<<this.DB-t)-1)<<t,this[this.t++]=l>>this.DB-t):this[this.t-1]|=l<<t,t+=n,t>=this.DB&&(t-=this.DB))}8==n&&0!=(128&e[0])&&(this.s=-1,t>0&&(this[this.t-1]|=(1<<this.DB-t)-1<<t)),this.clamp(),i&&o.ZERO.subTo(this,this)}function a(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t}function w(e){if(this.s<0)return"-"+this.negate().toString(e);var f;if(16==e)f=4;else if(8==e)f=3;else if(2==e)f=1;else if(32==e)f=5;else{if(4!=e)return this.toRadix(e);f=2}var n,o=(1<<f)-1,d=!1,i="",t=this.t,l=this.DB-t*this.DB%f;if(t-->0)for(l<this.DB&&(n=this[t]>>l)>0&&(d=!0,i=u(n));t>=0;)f>l?(n=(this[t]&(1<<l)-1)<<f-l,n|=this[--t]>>(l+=this.DB-f)):(n=this[t]>>(l-=f)&o,0>=l&&(l+=this.DB,--t)),n>0&&(d=!0),d&&(i+=u(n));return d?i:"0"}function b(){var e=d();return o.ZERO.subTo(this,e),e}function g(){return this.s<0?this.negate():this}function m(e){var f=this.s-e.s;if(0!=f)return f;var n=this.t;if(f=n-e.t,0!=f)return this.s<0?-f:f;for(;--n>=0;)if(0!=(f=this[n]-e[n]))return f;return 0}function x(e){var f,n=1;return 0!=(f=e>>>16)&&(e=f,n+=16),0!=(f=e>>8)&&(e=f,n+=8),0!=(f=e>>4)&&(e=f,n+=4),0!=(f=e>>2)&&(e=f,n+=2),0!=(f=e>>1)&&(e=f,n+=1),n}function h(){return this.t<=0?0:this.DB*(this.t-1)+x(this[this.t-1]^this.s&this.DM)}function j(e,f){var n;for(n=this.t-1;n>=0;--n)f[n+e]=this[n];for(n=e-1;n>=0;--n)f[n]=0;f.t=this.t+e,f.s=this.s}function v(e,f){for(var n=e;n<this.t;++n)f[n-e]=this[n];f.t=Math.max(this.t-e,0),f.s=this.s}function k(e,f){var n,o=e%this.DB,d=this.DB-o,i=(1<<d)-1,t=Math.floor(e/this.DB),l=this.s<<o&this.DM;for(n=this.t-1;n>=0;--n)f[n+t+1]=this[n]>>d|l,l=(this[n]&i)<<o;for(n=t-1;n>=0;--n)f[n]=0;f[t]=l,f.t=this.t+t+1,f.s=this.s,f.clamp()}function q(e,f){f.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)return void(f.t=0);var o=e%this.DB,d=this.DB-o,i=(1<<o)-1;f[0]=this[n]>>o;for(var t=n+1;t<this.t;++t)f[t-n-1]|=(this[t]&i)<<d,f[t-n]=this[t]>>o;o>0&&(f[this.t-n-1]|=(this.s&i)<<d),f.t=this.t-n,f.clamp()}function z(e,f){for(var n=0,o=0,d=Math.min(e.t,this.t);d>n;)o+=this[n]-e[n],f[n++]=o&this.DM,o>>=this.DB;if(e.t<this.t){for(o-=e.s;n<this.t;)o+=this[n],f[n++]=o&this.DM,o>>=this.DB;o+=this.s}else{for(o+=this.s;n<e.t;)o-=e[n],f[n++]=o&this.DM,o>>=this.DB;o-=e.s}f.s=0>o?-1:0,-1>o?f[n++]=this.DV+o:o>0&&(f[n++]=o),f.t=n,f.clamp()}function A(e,f){var n=this.abs(),d=e.abs(),i=n.t;for(f.t=i+d.t;--i>=0;)f[i]=0;for(i=0;i<d.t;++i)f[i+n.t]=n.am(0,d[i],f,i,0,n.t);f.s=0,f.clamp(),this.s!=e.s&&o.ZERO.subTo(f,f)}function B(e){for(var f=this.abs(),n=e.t=2*f.t;--n>=0;)e[n]=0;for(n=0;n<f.t-1;++n){var o=f.am(n,f[n],e,2*n,0,1);(e[n+f.t]+=f.am(n+1,2*f[n],e,2*n+1,o,f.t-n-1))>=f.DV&&(e[n+f.t]-=f.DV,e[n+f.t+1]=1)}e.t>0&&(e[e.t-1]+=f.am(n,f[n],e,2*n,0,1)),e.s=0,e.clamp()}function C(e,f,n){var i=e.abs();if(!(i.t<=0)){var t=this.abs();if(t.t<i.t)return null!=f&&f.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=d());var l=d(),u=this.s,p=e.s,s=this.DB-x(i[i.t-1]);s>0?(i.lShiftTo(s,l),t.lShiftTo(s,n)):(i.copyTo(l),t.copyTo(n));var y=l.t,c=l[y-1];if(0!=c){var r=c*(1<<this.F1)+(y>1?l[y-2]>>this.F2:0),a=this.FV/r,w=(1<<this.F1)/r,b=1<<this.F2,g=n.t,m=g-y,h=null==f?d():f;for(l.dlShiftTo(m,h),n.compareTo(h)>=0&&(n[n.t++]=1,n.subTo(h,n)),o.ONE.dlShiftTo(y,h),h.subTo(l,l);l.t<y;)l[l.t++]=0;for(;--m>=0;){var j=n[--g]==c?this.DM:Math.floor(n[g]*a+(n[g-1]+b)*w);if((n[g]+=l.am(0,j,n,m,0,y))<j)for(l.dlShiftTo(m,h),n.subTo(h,n);n[g]<--j;)n.subTo(h,n)}null!=f&&(n.drShiftTo(y,f),u!=p&&o.ZERO.subTo(f,f)),n.t=y,n.clamp(),s>0&&n.rShiftTo(s,n),0>u&&o.ZERO.subTo(n,n)}}}function D(e){var f=d();return this.abs().divRemTo(e,null,f),this.s<0&&f.compareTo(o.ZERO)>0&&e.subTo(f,f),f}function E(e){this.m=e}function F(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function G(e){return e}function H(e){e.divRemTo(this.m,null,e)}function I(e,f,n){e.multiplyTo(f,n),this.reduce(n)}function J(e,f){e.squareTo(f),this.reduce(f)}function K(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var f=3&e;return f=f*(2-(15&e)*f)&15,f=f*(2-(255&e)*f)&255,f=f*(2-((65535&e)*f&65535))&65535,f=f*(2-e*f%this.DV)%this.DV,f>0?this.DV-f:-f}function L(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function M(e){var f=d();return e.abs().dlShiftTo(this.m.t,f),f.divRemTo(this.m,null,f),e.s<0&&f.compareTo(o.ZERO)>0&&this.m.subTo(f,f),f}function N(e){var f=d();return e.copyTo(f),this.reduce(f),f}function O(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var f=0;f<this.m.t;++f){var n=32767&e[f],o=n*this.mpl+((n*this.mph+(e[f]>>15)*this.mpl&this.um)<<15)&e.DM;for(n=f+this.m.t,e[n]+=this.m.am(0,o,e,f,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function P(e,f){e.squareTo(f),this.reduce(f)}function Q(e,f,n){e.multiplyTo(f,n),this.reduce(n)}function R(){return 0==(this.t>0?1&this[0]:this.s)}function S(e,f){if(e>4294967295||1>e)return o.ONE;var n=d(),i=d(),t=f.convert(this),l=x(e)-1;for(t.copyTo(n);--l>=0;)if(f.sqrTo(n,i),(e&1<<l)>0)f.mulTo(i,t,n);else{var u=n;n=i,i=u}return f.revert(n)}function T(e,f){var n;return n=256>e||f.isEven()?new E(f):new L(f),this.exp(e,n)}function U(){this.i=0,this.j=0,this.S=new Array}function V(e){var f,n,o;for(f=0;256>f;++f)this.S[f]=f;for(n=0,f=0;256>f;++f)n=n+this.S[f]+e[f%e.length]&255,o=this.S[f],this.S[f]=this.S[n],this.S[n]=o;this.i=0,this.j=0}function W(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]}function X(){return new U}function Y(e){ge[me++]^=255&e,ge[me++]^=e>>8&255,ge[me++]^=e>>16&255,ge[me++]^=e>>24&255,me>=xe&&(me-=xe)}function Z(){Y((new Date).getTime())}function $(){if(null==be){for(Z(),be=X(),be.init(ge),me=0;me<ge.length;++me)ge[me]=0;me=0}return be.next()}function _(e){var f;for(f=0;f<e.length;++f)e[f]=$()}function ee(){}function fe(e,f){return new o(e,f)}function ne(e){return 16>e?"0"+e.toString(16):e.toString(16)}function oe(e,f){if(f<e.length+11)return alert("Message too long for RSA"),null;for(var n=new Array,d=e.length-1;d>=0&&f>0;){var i=e.charCodeAt(d--);128>i?n[--f]=i:i>127&&2048>i?(n[--f]=63&i|128,n[--f]=i>>6|192):(n[--f]=63&i|128,n[--f]=i>>6&63|128,n[--f]=i>>12|224)}n[--f]=0;for(var t=new ee,l=new Array;f>2;){for(l[0]=0;0==l[0];)t.nextBytes(l);n[--f]=l[0]}return n[--f]=2,n[--f]=0,new o(n)}function de(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function ie(e,f){null!=e&&null!=f&&e.length>0&&f.length>0?(this.n=fe(e,16),this.e=parseInt(f,16)):alert("Invalid RSA public key")}function te(e){return e.modPowInt(this.e,this.n)}function le(e){var f=oe(e,this.n.bitLength()+7>>3);if(null==f)return null;var n=this.doPublic(f);if(null==n)return null;var o=n.toString(16);return 0==(1&o.length)?o:"0"+o}var ue,pe=0xdeadbeefcafe,se=15715070==(16777215&pe);se&&"Microsoft Internet Explorer"==navigator.appName?(o.prototype.am=t,ue=30):se&&"Netscape"!=navigator.appName?(o.prototype.am=i,ue=26):(o.prototype.am=l,ue=28),o.prototype.DB=ue,o.prototype.DM=(1<<ue)-1,o.prototype.DV=1<<ue;var ye=52;o.prototype.FV=Math.pow(2,ye),o.prototype.F1=ye-ue,o.prototype.F2=2*ue-ye;var ce,re,ae="0123456789abcdefghijklmnopqrstuvwxyz",we=new Array;for(ce="0".charCodeAt(0),re=0;9>=re;++re)we[ce++]=re;for(ce="a".charCodeAt(0),re=10;36>re;++re)we[ce++]=re;for(ce="A".charCodeAt(0),re=10;36>re;++re)we[ce++]=re;E.prototype.convert=F,E.prototype.revert=G,E.prototype.reduce=H,E.prototype.mulTo=I,E.prototype.sqrTo=J,L.prototype.convert=M,L.prototype.revert=N,L.prototype.reduce=O,L.prototype.mulTo=Q,L.prototype.sqrTo=P,o.prototype.copyTo=s,o.prototype.fromInt=y,o.prototype.fromString=r,o.prototype.clamp=a,o.prototype.dlShiftTo=j,o.prototype.drShiftTo=v,o.prototype.lShiftTo=k,o.prototype.rShiftTo=q,o.prototype.subTo=z,o.prototype.multiplyTo=A,o.prototype.squareTo=B,o.prototype.divRemTo=C,o.prototype.invDigit=K,o.prototype.isEven=R,o.prototype.exp=S,o.prototype.toString=w,o.prototype.negate=b,o.prototype.abs=g,o.prototype.compareTo=m,o.prototype.bitLength=h,o.prototype.mod=D,o.prototype.modPowInt=T,o.ZERO=c(0),o.ONE=c(1),U.prototype.init=V,U.prototype.next=W;var be,ge,me,xe=256;if(null==ge){ge=new Array,me=0;var he;if("Netscape"==navigator.appName&&navigator.appVersion<"5"&&window.crypto){var je=window.crypto.random(32);for(he=0;he<je.length;++he)ge[me++]=255&je.charCodeAt(he)}for(;xe>me;)he=Math.floor(65536*Math.random()),ge[me++]=he>>>8,ge[me++]=255&he;me=0,Z()}ee.prototype.nextBytes=_,de.prototype.doPublic=te,de.prototype.setPublic=ie,de.prototype.encrypt=le,f.exports={SecureRandom:ee,byte2Hex:ne,RSAKey:de}},{}],4:[function(e,f,n){function o(e,f){return r.isUndefined(f)?""+f:!r.isNumber(f)||!isNaN(f)&&isFinite(f)?r.isFunction(f)||r.isRegExp(f)?f.toString():f:f.toString()}function d(e,f){return r.isString(e)?e.length<f?e:e.slice(0,f):e}function i(e){return d(JSON.stringify(e.actual,o),128)+" "+e.operator+" "+d(JSON.stringify(e.expected,o),128)}function t(e,f,n,o,d){throw new b.AssertionError({message:n,actual:e,expected:f,operator:o,stackStartFunction:d})}function l(e,f){e||t(e,!0,f,"==",b.ok)}function u(e,f){if(e===f)return!0;if(r.isBuffer(e)&&r.isBuffer(f)){if(e.length!=f.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==f[n])return!1;return!0}return r.isDate(e)&&r.isDate(f)?e.getTime()===f.getTime():r.isRegExp(e)&&r.isRegExp(f)?e.source===f.source&&e.global===f.global&&e.multiline===f.multiline&&e.lastIndex===f.lastIndex&&e.ignoreCase===f.ignoreCase:r.isObject(e)||r.isObject(f)?s(e,f):e==f}function p(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function s(e,f){if(r.isNullOrUndefined(e)||r.isNullOrUndefined(f))return!1;if(e.prototype!==f.prototype)return!1;if(p(e))return p(f)?(e=a.call(e),f=a.call(f),u(e,f)):!1;try{var n,o,d=g(e),i=g(f)}catch(t){return!1}if(d.length!=i.length)return!1;for(d.sort(),i.sort(),o=d.length-1;o>=0;o--)if(d[o]!=i[o])return!1;for(o=d.length-1;o>=0;o--)if(n=d[o],!u(e[n],f[n]))return!1;return!0}function y(e,f){return e&&f?"[object RegExp]"==Object.prototype.toString.call(f)?f.test(e):e instanceof f?!0:f.call({},e)===!0?!0:!1:!1}function c(e,f,n,o){var d;r.isString(n)&&(o=n,n=null);try{f()}catch(i){d=i}if(o=(n&&n.name?" ("+n.name+").":".")+(o?" "+o:"."),e&&!d&&t(d,n,"Missing expected exception"+o),!e&&y(d,n)&&t(d,n,"Got unwanted exception"+o),e&&d&&n&&!y(d,n)||!e&&d)throw d}var r=e("util/"),a=Array.prototype.slice,w=Object.prototype.hasOwnProperty,b=f.exports=l;b.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=i(this),this.generatedMessage=!0);var f=e.stackStartFunction||t;if(Error.captureStackTrace)Error.captureStackTrace(this,f);else{var n=new Error;if(n.stack){var o=n.stack,d=f.name,l=o.indexOf("\n"+d);if(l>=0){var u=o.indexOf("\n",l+1);o=o.substring(u+1)}this.stack=o}}},r.inherits(b.AssertionError,Error),b.fail=t,b.ok=l,b.equal=function(e,f,n){e!=f&&t(e,f,n,"==",b.equal)},b.notEqual=function(e,f,n){e==f&&t(e,f,n,"!=",b.notEqual)},b.deepEqual=function(e,f,n){u(e,f)||t(e,f,n,"deepEqual",b.deepEqual)},b.notDeepEqual=function(e,f,n){u(e,f)&&t(e,f,n,"notDeepEqual",b.notDeepEqual)},b.strictEqual=function(e,f,n){e!==f&&t(e,f,n,"===",b.strictEqual)},b.notStrictEqual=function(e,f,n){e===f&&t(e,f,n,"!==",b.notStrictEqual)},b["throws"]=function(e,f,n){c.apply(this,[!0].concat(a.call(arguments)))},b.doesNotThrow=function(e,f){c.apply(this,[!1].concat(a.call(arguments)))},b.ifError=function(e){if(e)throw e};var g=Object.keys||function(e){var f=[];for(var n in e)w.call(e,n)&&f.push(n);return f}},{"util/":7}],5:[function(e,f,n){"function"==typeof Object.create?f.exports=function(e,f){e.super_=f,e.prototype=Object.create(f.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:f.exports=function(e,f){e.super_=f;var n=function(){};n.prototype=f.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],6:[function(e,f,n){f.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],7:[function(e,f,n){(function(f,o){function d(e,f){var o={seen:[],stylize:t};return arguments.length>=3&&(o.depth=arguments[2]),arguments.length>=4&&(o.colors=arguments[3]),w(f)?o.showHidden=f:f&&n._extend(o,f),j(o.showHidden)&&(o.showHidden=!1),j(o.depth)&&(o.depth=2),j(o.colors)&&(o.colors=!1),j(o.customInspect)&&(o.customInspect=!0),o.colors&&(o.stylize=i),u(o,e,o.depth)}function i(e,f){var n=d.styles[f];return n?"["+d.colors[n][0]+"m"+e+"["+d.colors[n][1]+"m":e}function t(e,f){return e}function l(e){var f={};return e.forEach(function(e,n){f[e]=!0}),f}function u(e,f,o){if(e.customInspect&&f&&A(f.inspect)&&f.inspect!==n.inspect&&(!f.constructor||f.constructor.prototype!==f)){var d=f.inspect(o,e);return x(d)||(d=u(e,d,o)),d}var i=p(e,f);if(i)return i;var t=Object.keys(f),w=l(t);if(e.showHidden&&(t=Object.getOwnPropertyNames(f)),z(f)&&(t.indexOf("message")>=0||t.indexOf("description")>=0))return s(f);if(0===t.length){if(A(f)){var b=f.name?": "+f.name:"";return e.stylize("[Function"+b+"]","special")}if(v(f))return e.stylize(RegExp.prototype.toString.call(f),"regexp");if(q(f))return e.stylize(Date.prototype.toString.call(f),"date");if(z(f))return s(f)}var g="",m=!1,h=["{","}"];if(a(f)&&(m=!0,h=["[","]"]),A(f)){var j=f.name?": "+f.name:"";g=" [Function"+j+"]"}if(v(f)&&(g=" "+RegExp.prototype.toString.call(f)),q(f)&&(g=" "+Date.prototype.toUTCString.call(f)),z(f)&&(g=" "+s(f)),0===t.length&&(!m||0==f.length))return h[0]+g+h[1];if(0>o)return v(f)?e.stylize(RegExp.prototype.toString.call(f),"regexp"):e.stylize("[Object]","special");e.seen.push(f);var k;return k=m?y(e,f,o,w,t):t.map(function(n){return c(e,f,o,w,n,m)}),e.seen.pop(),r(k,g,h)}function p(e,f){if(j(f))return e.stylize("undefined","undefined");if(x(f)){var n="'"+JSON.stringify(f).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return m(f)?e.stylize(""+f,"number"):w(f)?e.stylize(""+f,"boolean"):b(f)?e.stylize("null","null"):void 0}function s(e){return"["+Error.prototype.toString.call(e)+"]"}function y(e,f,n,o,d){for(var i=[],t=0,l=f.length;l>t;++t)F(f,String(t))?i.push(c(e,f,n,o,String(t),!0)):i.push("");return d.forEach(function(d){d.match(/^\d+$/)||i.push(c(e,f,n,o,d,!0))}),i}function c(e,f,n,o,d,i){var t,l,p;if(p=Object.getOwnPropertyDescriptor(f,d)||{value:f[d]},p.get?l=p.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):p.set&&(l=e.stylize("[Setter]","special")),F(o,d)||(t="["+d+"]"),l||(e.seen.indexOf(p.value)<0?(l=b(n)?u(e,p.value,null):u(e,p.value,n-1),l.indexOf("\n")>-1&&(l=i?l.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+l.split("\n").map(function(e){return"   "+e}).join("\n"))):l=e.stylize("[Circular]","special")),j(t)){if(i&&d.match(/^\d+$/))return l;t=JSON.stringify(""+d),t.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(t=t.substr(1,t.length-2),t=e.stylize(t,"name")):(t=t.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),t=e.stylize(t,"string"))}return t+": "+l}function r(e,f,n){var o=0,d=e.reduce(function(e,f){return o++,f.indexOf("\n")>=0&&o++,e+f.replace(/\u001b\[\d\d?m/g,"").length+1},0);return d>60?n[0]+(""===f?"":f+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+f+" "+e.join(", ")+" "+n[1]}function a(e){return Array.isArray(e)}function w(e){return"boolean"==typeof e}function b(e){return null===e}function g(e){return null==e}function m(e){return"number"==typeof e}function x(e){return"string"==typeof e}function h(e){return"symbol"==typeof e}function j(e){return void 0===e}function v(e){return k(e)&&"[object RegExp]"===C(e)}function k(e){return"object"==typeof e&&null!==e}function q(e){return k(e)&&"[object Date]"===C(e)}function z(e){return k(e)&&("[object Error]"===C(e)||e instanceof Error)}function A(e){return"function"==typeof e}function B(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function C(e){return Object.prototype.toString.call(e)}function D(e){return 10>e?"0"+e.toString(10):e.toString(10)}function E(){var e=new Date,f=[D(e.getHours()),D(e.getMinutes()),D(e.getSeconds())].join(":");return[e.getDate(),J[e.getMonth()],f].join(" ")}function F(e,f){return Object.prototype.hasOwnProperty.call(e,f)}var G=/%[sdj%]/g;n.format=function(e){if(!x(e)){for(var f=[],n=0;n<arguments.length;n++)f.push(d(arguments[n]));return f.join(" ")}for(var n=1,o=arguments,i=o.length,t=String(e).replace(G,function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(o[n++]);case"%d":return Number(o[n++]);case"%j":try{return JSON.stringify(o[n++])}catch(f){return"[Circular]"}default:return e}}),l=o[n];i>n;l=o[++n])t+=b(l)||!k(l)?" "+l:" "+d(l);return t},n.deprecate=function(e,d){function i(){if(!t){if(f.throwDeprecation)throw new Error(d);f.traceDeprecation?console.trace(d):console.error(d),t=!0}return e.apply(this,arguments)}if(j(o.process))return function(){return n.deprecate(e,d).apply(this,arguments)};if(f.noDeprecation===!0)return e;var t=!1;return i};var H,I={};n.debuglog=function(e){if(j(H)&&(H=f.env.NODE_DEBUG||""),e=e.toUpperCase(),!I[e])if(new RegExp("\\b"+e+"\\b","i").test(H)){var o=f.pid;I[e]=function(){var f=n.format.apply(n,arguments);console.error("%s %d: %s",e,o,f)}}else I[e]=function(){};return I[e]},n.inspect=d,d.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},d.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=a,n.isBoolean=w,n.isNull=b,n.isNullOrUndefined=g,n.isNumber=m,n.isString=x,n.isSymbol=h,n.isUndefined=j,n.isRegExp=v,n.isObject=k,n.isDate=q,n.isError=z,n.isFunction=A,n.isPrimitive=B,n.isBuffer=e("./support/isBuffer");var J=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",E(),n.format.apply(n,arguments))},n.inherits=e("inherits"),n._extend=function(e,f){if(!f||!k(f))return e;for(var n=Object.keys(f),o=n.length;o--;)e[n[o]]=f[n[o]];return e}}).call(this,e("FWaASH"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":6,FWaASH:8,inherits:5}],8:[function(e,f,n){function o(){}var d=f.exports={};d.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,f="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(f){var n=[];return window.addEventListener("message",function(e){var f=e.source;if((f===window||null===f)&&"process-tick"===e.data&&(e.stopPropagation(),n.length>0)){var o=n.shift();o()}},!0),function(e){n.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),d.title="browser",d.browser=!0,d.env={},d.argv=[],d.on=o,d.addListener=o,d.once=o,d.off=o,d.removeListener=o,d.removeAllListeners=o,d.emit=o,d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")}},{}],9:[function(e,f,n){(function(n){function o(){}function d(){c.log.apply(c,arguments)}function i(){c.log.apply(c,arguments)}function t(){c.warn.apply(c,arguments)}function l(e){w[e]=Date.now()}function u(e){var f=w[e];if(!f)throw new Error("No such label: "+e);var n=Date.now()-f;c.log(e+": "+n+"ms")}function p(){var e=new Error;e.name="Trace",e.message=r.format.apply(null,arguments),c.error(e.stack)}function s(e){c.log(r.inspect(e)+"\n")}function y(e){if(!e){var f=a.call(arguments,1);y.ok(!1,r.format.apply(null,f))}}var c,r=e("util"),y=e("assert"),a=Array.prototype.slice,w={};c="undefined"!=typeof n&&n.console?n.console:"undefined"!=typeof window&&window.console?window.console:{};for(var b=[[o,"log"],[d,"info"],[i,"warn"],[t,"error"],[l,"time"],[u,"timeEnd"],[p,"trace"],[s,"dir"],[y,"assert"]],g=0;g<b.length;g++){var m=b[g],x=m[0],h=m[1];c[h]||(c[h]=x)}f.exports=c}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{assert:4,util:32}],10:[function(e,f,n){function o(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function d(e){return"function"==typeof e}function i(e){return"number"==typeof e}function t(e){return"object"==typeof e&&null!==e}function l(e){return void 0===e}f.exports=o,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._maxListeners=void 0,o.defaultMaxListeners=10,o.prototype.setMaxListeners=function(e){if(!i(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},o.prototype.emit=function(e){var f,n,o,i,u,p;if(this._events||(this._events={}),"error"===e&&(!this._events.error||t(this._events.error)&&!this._events.error.length)){if(f=arguments[1],f instanceof Error)throw f;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],l(n))return!1;if(d(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(o=arguments.length,i=new Array(o-1),u=1;o>u;u++)i[u-1]=arguments[u];n.apply(this,i)}else if(t(n)){for(o=arguments.length,i=new Array(o-1),u=1;o>u;u++)i[u-1]=arguments[u];for(p=n.slice(),o=p.length,u=0;o>u;u++)p[u].apply(this,i)}return!0},o.prototype.addListener=function(e,f){var n;if(!d(f))throw TypeError("listener must be a function");if(this._events||(this._events={}),
this._events.newListener&&this.emit("newListener",e,d(f.listener)?f.listener:f),this._events[e]?t(this._events[e])?this._events[e].push(f):this._events[e]=[this._events[e],f]:this._events[e]=f,t(this._events[e])&&!this._events[e].warned){var n;n=l(this._maxListeners)?o.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},o.prototype.on=o.prototype.addListener,o.prototype.once=function(e,f){function n(){this.removeListener(e,n),o||(o=!0,f.apply(this,arguments))}if(!d(f))throw TypeError("listener must be a function");var o=!1;return n.listener=f,this.on(e,n),this},o.prototype.removeListener=function(e,f){var n,o,i,l;if(!d(f))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],i=n.length,o=-1,n===f||d(n.listener)&&n.listener===f)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,f);else if(t(n)){for(l=i;l-->0;)if(n[l]===f||n[l].listener&&n[l].listener===f){o=l;break}if(0>o)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,f)}return this},o.prototype.removeAllListeners=function(e){var f,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(f in this._events)"removeListener"!==f&&this.removeAllListeners(f);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],d(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},o.prototype.listeners=function(e){var f;return f=this._events&&this._events[e]?d(this._events[e])?[this._events[e]]:this._events[e].slice():[]},o.listenerCount=function(e,f){var n;return n=e._events&&e._events[f]?d(e._events[f])?1:e._events[f].length:0}},{}],11:[function(e,f,n){(function(n){__browserify_shim_require__=e,function(e,f,n,o,d){var i=i||function(e,f){var n={},o=n.lib={},d=o.Base=function(){function e(){}return{extend:function(f){e.prototype=this;var n=new e;return f&&n.mixIn(f),n.hasOwnProperty("init")||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var f in e)e.hasOwnProperty(f)&&(this[f]=e[f]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),i=o.WordArray=d.extend({init:function(e,n){e=this.words=e||[],n!=f?this.sigBytes=n:this.sigBytes=4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var f=this.words,n=e.words,o=this.sigBytes,d=e.sigBytes;if(this.clamp(),o%4)for(var i=0;d>i;i++){var t=n[i>>>2]>>>24-i%4*8&255;f[o+i>>>2]|=t<<24-(o+i)%4*8}else if(n.length>65535)for(var i=0;d>i;i+=4)f[o+i>>>2]=n[i>>>2];else f.push.apply(f,n);return this.sigBytes+=d,this},clamp:function(){var f=this.words,n=this.sigBytes;f[n>>>2]&=4294967295<<32-n%4*8,f.length=e.ceil(n/4)},clone:function(){var e=d.clone.call(this);return e.words=this.words.slice(0),e},random:function(f){for(var n=[],o=0;f>o;o+=4)n.push(4294967296*e.random()|0);return new i.init(n,f)}}),t=n.enc={},l=t.Hex={stringify:function(e){for(var f=e.words,n=e.sigBytes,o=[],d=0;n>d;d++){var i=f[d>>>2]>>>24-d%4*8&255;o.push((i>>>4).toString(16)),o.push((15&i).toString(16))}return o.join("")},parse:function(e){for(var f=e.length,n=[],o=0;f>o;o+=2)n[o>>>3]|=parseInt(e.substr(o,2),16)<<24-o%8*4;return new i.init(n,f/2)}},u=t.Latin1={stringify:function(e){for(var f=e.words,n=e.sigBytes,o=[],d=0;n>d;d++){var i=f[d>>>2]>>>24-d%4*8&255;o.push(String.fromCharCode(i))}return o.join("")},parse:function(e){for(var f=e.length,n=[],o=0;f>o;o++)n[o>>>2]|=(255&e.charCodeAt(o))<<24-o%4*8;return new i.init(n,f)}},p=t.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(f){throw new Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},s=o.BufferedBlockAlgorithm=d.extend({reset:function(){this._data=new i.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=p.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(f){var n=this._data,o=n.words,d=n.sigBytes,t=this.blockSize,l=4*t,u=d/l;u=f?e.ceil(u):e.max((0|u)-this._minBufferSize,0);var p=u*t,s=e.min(4*p,d);if(p){for(var y=0;p>y;y+=t)this._doProcessBlock(o,y);var c=o.splice(0,p);n.sigBytes-=s}return new i.init(c,s)},clone:function(){var e=d.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),y=(o.Hasher=s.extend({cfg:d.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){s.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){e&&this._append(e);var f=this._doFinalize();return f},blockSize:16,_createHelper:function(e){return function(f,n){return new e.init(n).finalize(f)}},_createHmacHelper:function(e){return function(f,n){return new y.HMAC.init(e,n).finalize(f)}}}),n.algo={});return n}(Math);i.lib.Cipher||function(e){var f=i,n=f.lib,o=n.Base,d=n.WordArray,t=n.BufferedBlockAlgorithm,l=f.enc,u=(l.Utf8,l.Base64),p=f.algo,s=p.EvpKDF,y=n.Cipher=t.extend({cfg:o.extend(),createEncryptor:function(e,f){return this.create(this._ENC_XFORM_MODE,e,f)},createDecryptor:function(e,f){return this.create(this._DEC_XFORM_MODE,e,f)},init:function(e,f,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=f,this.reset()},reset:function(){t.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){e&&this._append(e);var f=this._doFinalize();return f},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?k:h}return function(f){return{encrypt:function(n,o,d){return e(o).encrypt(f,n,o,d)},decrypt:function(n,o,d){return e(o).decrypt(f,n,o,d)}}}}()}),c=(n.StreamCipher=y.extend({_doFinalize:function(){var e=this._process(!0);return e},blockSize:1}),f.mode={}),r=n.BlockCipherMode=o.extend({createEncryptor:function(e,f){return this.Encryptor.create(e,f)},createDecryptor:function(e,f){return this.Decryptor.create(e,f)},init:function(e,f){this._cipher=e,this._iv=f}}),a=c.CBC=function(){function f(f,n,o){var d=this._iv;if(d){var i=d;this._iv=e}else var i=this._prevBlock;for(var t=0;o>t;t++)f[n+t]^=i[t]}var n=r.extend();return n.Encryptor=n.extend({processBlock:function(e,n){var o=this._cipher,d=o.blockSize;f.call(this,e,n,d),o.encryptBlock(e,n),this._prevBlock=e.slice(n,n+d)}}),n.Decryptor=n.extend({processBlock:function(e,n){var o=this._cipher,d=o.blockSize,i=e.slice(n,n+d);o.decryptBlock(e,n),f.call(this,e,n,d),this._prevBlock=i}}),n}(),w=f.pad={},b=w.Pkcs7={pad:function(e,f){for(var n=4*f,o=n-e.sigBytes%n,i=o<<24|o<<16|o<<8|o,t=[],l=0;o>l;l+=4)t.push(i);var u=d.create(t,o);e.concat(u)},unpad:function(e){var f=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=f}},g=(n.BlockCipher=y.extend({cfg:y.cfg.extend({mode:a,padding:b}),reset:function(){y.reset.call(this);var e=this.cfg,f=e.iv,n=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var o=n.createEncryptor;else{var o=n.createDecryptor;this._minBufferSize=1}this._mode=o.call(n,this,f&&f.words)},_doProcessBlock:function(e,f){this._mode.processBlock(e,f)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var f=this._process(!0)}else{var f=this._process(!0);e.unpad(f)}return f},blockSize:4}),n.CipherParams=o.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),m=f.format={},x=m.OpenSSL={stringify:function(e){var f=e.ciphertext,n=e.salt;if(n)var o=d.create([1398893684,1701076831]).concat(n).concat(f);else var o=f;return o.toString(u)},parse:function(e){var f=u.parse(e),n=f.words;if(1398893684==n[0]&&1701076831==n[1]){var o=d.create(n.slice(2,4));n.splice(0,4),f.sigBytes-=16}return g.create({ciphertext:f,salt:o})}},h=n.SerializableCipher=o.extend({cfg:o.extend({format:x}),encrypt:function(e,f,n,o){o=this.cfg.extend(o);var d=e.createEncryptor(n,o),i=d.finalize(f),t=d.cfg;return g.create({ciphertext:i,key:n,iv:t.iv,algorithm:e,mode:t.mode,padding:t.padding,blockSize:e.blockSize,formatter:o.format})},decrypt:function(e,f,n,o){o=this.cfg.extend(o),f=this._parse(f,o.format);var d=e.createDecryptor(n,o).finalize(f.ciphertext);return d},_parse:function(e,f){return"string"==typeof e?f.parse(e,this):e}}),j=f.kdf={},v=j.OpenSSL={execute:function(e,f,n,o){o||(o=d.random(8));var i=s.create({keySize:f+n}).compute(e,o),t=d.create(i.words.slice(f),4*n);return i.sigBytes=4*f,g.create({key:i,iv:t,salt:o})}},k=n.PasswordBasedCipher=h.extend({cfg:h.cfg.extend({kdf:v}),encrypt:function(e,f,n,o){o=this.cfg.extend(o);var d=o.kdf.execute(n,e.keySize,e.ivSize);o.iv=d.iv;var i=h.encrypt.call(this,e,f,d.key,o);return i.mixIn(d),i},decrypt:function(e,f,n,o){o=this.cfg.extend(o),f=this._parse(f,o.format);var d=o.kdf.execute(n,e.keySize,e.ivSize,f.salt);o.iv=d.iv;var i=h.decrypt.call(this,e,f,d.key,o);return i}})}(),function(){var e=i,f=e.lib,n=f.WordArray,o=f.Hasher,d=e.algo,t=[],l=d.SHA1=o.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,f){for(var n=this._hash.words,o=n[0],d=n[1],i=n[2],l=n[3],u=n[4],p=0;80>p;p++){if(16>p)t[p]=0|e[f+p];else{var s=t[p-3]^t[p-8]^t[p-14]^t[p-16];t[p]=s<<1|s>>>31}var y=(o<<5|o>>>27)+u+t[p];y+=20>p?(d&i|~d&l)+1518500249:40>p?(d^i^l)+1859775393:60>p?(d&i|d&l|i&l)-1894007588:(d^i^l)-899497514,u=l,l=i,i=d<<30|d>>>2,d=o,o=y}n[0]=n[0]+o|0,n[1]=n[1]+d|0,n[2]=n[2]+i|0,n[3]=n[3]+l|0,n[4]=n[4]+u|0},_doFinalize:function(){var e=this._data,f=e.words,n=8*this._nDataBytes,o=8*e.sigBytes;return f[o>>>5]|=128<<24-o%32,f[(o+64>>>9<<4)+14]=Math.floor(n/4294967296),f[(o+64>>>9<<4)+15]=n,e.sigBytes=4*f.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=o._createHelper(l),e.HmacSHA1=o._createHmacHelper(l)}(),function(e){var f=i,n=f.lib,o=n.Base,d=n.WordArray,t=f.x64={};t.Word=o.extend({init:function(e,f){this.high=e,this.low=f}}),t.WordArray=o.extend({init:function(f,n){f=this.words=f||[],n!=e?this.sigBytes=n:this.sigBytes=8*f.length},toX32:function(){for(var e=this.words,f=e.length,n=[],o=0;f>o;o++){var i=e[o];n.push(i.high),n.push(i.low)}return d.create(n,this.sigBytes)},clone:function(){for(var e=o.clone.call(this),f=e.words=this.words.slice(0),n=f.length,d=0;n>d;d++)f[d]=f[d].clone();return e}})}(),d("undefined"!=typeof i?i:window.CryptoJS)}.call(n,void 0,void 0,void 0,void 0,function(e){f.exports=e})}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],12:[function(e,f,n){f.exports=e(2)},{}],13:[function(e,f,n){var o=e("./v1"),d=e("./v4"),i=d;i.v1=o,i.v4=d,f.exports=i},{"./v1":16,"./v4":17}],14:[function(e,f,n){function o(e,f){var n=f||0,o=d;return o[e[n++]]+o[e[n++]]+o[e[n++]]+o[e[n++]]+"-"+o[e[n++]]+o[e[n++]]+"-"+o[e[n++]]+o[e[n++]]+"-"+o[e[n++]]+o[e[n++]]+"-"+o[e[n++]]+o[e[n++]]+o[e[n++]]+o[e[n++]]+o[e[n++]]+o[e[n++]]}for(var d=[],i=0;256>i;++i)d[i]=(i+256).toString(16).substr(1);f.exports=o},{}],15:[function(e,f,n){(function(e){var n,o=e.crypto||e.msCrypto;if(o&&o.getRandomValues){var d=new Uint8Array(16);n=function(){return o.getRandomValues(d),d}}if(!n){var i=new Array(16);n=function(){for(var e,f=0;16>f;f++)0===(3&f)&&(e=4294967296*Math.random()),i[f]=e>>>((3&f)<<3)&255;return i}}f.exports=n}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],16:[function(e,f,n){function o(e,f,n){var o=f&&n||0,d=f||[];e=e||{};var t=void 0!==e.clockseq?e.clockseq:u,y=void 0!==e.msecs?e.msecs:(new Date).getTime(),c=void 0!==e.nsecs?e.nsecs:s+1,r=y-p+(c-s)/1e4;if(0>r&&void 0===e.clockseq&&(t=t+1&16383),(0>r||y>p)&&void 0===e.nsecs&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");p=y,s=c,u=t,y+=122192928e5;var a=(1e4*(268435455&y)+c)%4294967296;d[o++]=a>>>24&255,d[o++]=a>>>16&255,d[o++]=a>>>8&255,d[o++]=255&a;var w=y/4294967296*1e4&268435455;d[o++]=w>>>8&255,d[o++]=255&w,d[o++]=w>>>24&15|16,d[o++]=w>>>16&255,d[o++]=t>>>8|128,d[o++]=255&t;for(var b=e.node||l,g=0;6>g;++g)d[o+g]=b[g];return f?f:i(d)}var d=e("./lib/rng"),i=e("./lib/bytesToUuid"),t=d(),l=[1|t[0],t[1],t[2],t[3],t[4],t[5]],u=16383&(t[6]<<8|t[7]),p=0,s=0;f.exports=o},{"./lib/bytesToUuid":14,"./lib/rng":15}],17:[function(e,f,n){function o(e,f,n){var o=f&&n||0;"string"==typeof e&&(f="binary"==e?new Array(16):null,e=null),e=e||{};var t=e.random||(e.rng||d)();if(t[6]=15&t[6]|64,t[8]=63&t[8]|128,f)for(var l=0;16>l;++l)f[o+l]=t[l];return f||i(t)}var d=e("./lib/rng"),i=e("./lib/bytesToUuid");f.exports=o},{"./lib/bytesToUuid":14,"./lib/rng":15}],18:[function(e,f,n){function o(){if(window&&window.device)return window.device.uuid;if(navigator&&navigator.device)return navigator.device.uuid;if(window&&window.localStorage){var e=window.localStorage.getItem(i);return e||(e=d(),localStorage.setItem(i,e)),e}throw Error("Cannot create and store client id")}var d=e("uuid").v1,i="feedhenry_sync_client";f.exports={getClientId:o}},{uuid:13}],19:[function(e,f,n){var o,d,i=function(e,f,n){d||(d="/sync/");var i=o+d+e.dataset_id,t=e.req,l=JSON.stringify(t),u=new XMLHttpRequest;u.open("POST",i,!0),u.setRequestHeader("Content-type","application/json; charset=utf-8"),u.onreadystatechange=function(){if(u.readyState===XMLHttpRequest.DONE)if(u.status>=200&&u.status<300||304===u.status){var e;try{u.responseText&&(e=JSON.parse(u.responseText))}catch(o){return n(o)}f(e)}else n(u.responseText)},u.send(l)},t=function(e,f){o=e,d=f};f.exports={handler:i,init:t}},{}],20:[function(e,f,n){var o=e("./sync-client"),d=window.$fh=window.$fh||{};d.sync=o,f.exports=d.sync},{"./sync-client":21}],21:[function(e,f,n){var o=e("../libs/generated/crypto"),d=e("../libs/generated/lawnchair"),i=e("./cloudHandler"),t=e("./clientIdProvider"),l=6e4,u={defaults:{sync_frequency:10,auto_sync_local_updates:!0,notify_client_storage_failed:!0,notify_sync_started:!0,notify_sync_complete:!0,notify_offline_update:!0,notify_collision_detected:!0,notify_remote_update_failed:!0,notify_local_update_applied:!0,notify_remote_update_applied:!0,notify_delta_received:!0,notify_record_delta_received:!0,notify_sync_failed:!0,do_console_log:!1,crashed_count_wait:10,resend_crashed_updates:!0,sync_active:!0,storage_strategy:"html5-filesystem",file_system_quota:61644800,icloud_backup:!1,resend_inflight_pendings_minutes:1440},notifications:{CLIENT_STORAGE_FAILED:"client_storage_failed",SYNC_STARTED:"sync_started",SYNC_COMPLETE:"sync_complete",OFFLINE_UPDATE:"offline_update",COLLISION_DETECTED:"collision_detected",REMOTE_UPDATE_FAILED:"remote_update_failed",REMOTE_UPDATE_APPLIED:"remote_update_applied",LOCAL_UPDATE_APPLIED:"local_update_applied",DELTA_RECEIVED:"delta_received",RECORD_DELTA_RECEIVED:"record_delta_received",SYNC_FAILED:"sync_failed"},datasets:{},config:void 0,notify_callback:void 0,notify_callback_map:{},init_is_called:!1,uid_map:{},init:function(e){u.consoleLog("sync - init called"),u.config=JSON.parse(JSON.stringify(u.defaults));for(var f in e)u.config[f]=e[f];u.init_is_called||(u.init_is_called=!0,u.datasetMonitor()),i.init(u.config.cloudUrl,u.config.cloudPath)},notify:function(e,f){1===arguments.length&&"function"==typeof e?u.notify_callback=e:u.notify_callback_map[e]=f},manage:function(e,f,n,o,d){u.consoleLog("manage - START"),u.config||(u.config=JSON.parse(JSON.stringify(u.defaults)));var i=f||{},t=function(f){u.consoleLog("doManage dataset :: initialised = "+f.initialised+" :: "+e+" :: "+JSON.stringify(i));var t=f.config?f.config:u.config,l=u.setOptions(t,i);f.query_params=n||f.query_params||{},f.meta_data=o||f.meta_data||{},f.config=l,f.syncRunning=!1,f.syncPending=!0,f.initialised=!0,"undefined"==typeof f.meta&&(f.meta={}),u.saveDataSet(e,function(){d&&d()})};u.getDataSet(e,function(e){u.consoleLog("manage - dataset already loaded"),t(e)},function(f){u.consoleLog("manage - dataset not loaded... trying to load"),u.loadDataSet(e,function(f){u.consoleLog("manage - dataset loaded from local storage"),u.doNotify(e,null,u.notifications.LOCAL_UPDATE_APPLIED,"load"),t(f)},function(f){u.consoleLog("manage - Creating new dataset for id "+e);var n={};n.data={},n.pending={},n.meta={},u.datasets[e]=n,t(n)})})},setOptions:function(e,f){e||(e=JSON.parse(JSON.stringify(u.defaults)));var n=JSON.parse(JSON.stringify(e)),o=JSON.parse(JSON.stringify(f));for(var d in o)n[d]=o[d];return n},list:function(e,f,n){u.getDataSet(e,function(e){if(e&&e.data){var o=JSON.parse(JSON.stringify(e.data));f(o)}else n&&n("no_data")},function(e,f){n&&n(e,f)})},getUID:function(e){var f=u.uid_map[e];return f||0===f?f:e},create:function(e,f,n,o){return null==f&&o?o("null_data"):void u.addPendingObj(e,null,f,"create",n,o)},read:function(e,f,n,o){u.getDataSet(e,function(e){f=u.getUID(f);var d=e.data[f];if(d){var i=JSON.parse(JSON.stringify(d));n(i)}else o("unknown_uid")},function(e,f){o&&o(e,f)})},update:function(e,f,n,o,d){f=u.getUID(f),u.addPendingObj(e,f,n,"update",o,d)},"delete":function(e,f,n,o){f=u.getUID(f),u.addPendingObj(e,f,null,"delete",n,o)},getPending:function(e,f){u.getDataSet(e,function(e){var n;e&&(n=e.pending),f(n)},function(e,f){u.consoleLog(e)})},clearPending:function(e,f){u.getDataSet(e,function(n){n.pending={},u.saveDataSet(e,f)})},listCollisions:function(e,f,n){u.getDataSet(e,function(o){u.doCloudCall({dataset_id:e,req:{fn:"listCollisions",meta_data:o.meta_data}},f,n)},n)},removeCollision:function(e,f,n,o){u.getDataSet(e,function(d){u.doCloudCall({dataset_id:e,req:{fn:"removeCollision",hash:f,meta_data:d.meta_data}},n,o)})},setNetworkStatusHandler:function(e){handler&&"function"==typeof handler?u.isOnline=handler:u.consoleLog("setNetworkStatusHandler called  with wrong parameter")},isOnline:function(e){var f=!0;if("undefined"!=typeof navigator.onLine&&(f=navigator.onLine),f&&"undefined"!=typeof navigator.network&&"undefined"!=typeof navigator.network.connection){var n=navigator.network.connection.type;("none"===n||null===n)&&(f=!1)}return e(f)},doNotify:function(e,f,n,o){if(u.notify_callback||u.notify_callback_map[e]){var d=u.notify_callback_map[e]||u.notify_callback;if(u.config["notify_"+n]){var i={dataset_id:e,uid:f,code:n,message:o};setTimeout(function(){d(i)},0)}}},getDataSet:function(e,f,n){var o=u.datasets[e];o?f(o):n&&n("unknown_dataset "+e,e)},getQueryParams:function(e,f,n){var o=u.datasets[e];o?f(o.query_params):n&&n("unknown_dataset "+e,e)},setQueryParams:function(e,f,n,o){var d=u.datasets[e];d?(d.query_params=f,u.saveDataSet(e),n&&n(d.query_params)):o&&o("unknown_dataset "+e,e)},getMetaData:function(e,f,n){var o=u.datasets[e];o?f(o.meta_data):n&&n("unknown_dataset "+e,e)},setMetaData:function(e,f,n,o){var d=u.datasets[e];d?(d.meta_data=f,u.saveDataSet(e),n&&n(d.meta_data)):o&&o("unknown_dataset "+e,e)},getConfig:function(e,f,n){var o=u.datasets[e];o?f(o.config):n&&n("unknown_dataset "+e,e)},setConfig:function(e,f,n,o){var d=u.datasets[e];if(d){var i=u.setOptions(d.config,f);d.config=i,u.saveDataSet(e),n&&n(d.config)}else o&&o("unknown_dataset "+e,e)},stopSync:function(e,f,n){u.setConfig(e,{sync_active:!1},function(){f&&f()},n)},startSync:function(e,f,n){u.setConfig(e,{sync_active:!0},function(){f&&f()},n)},doSync:function(e,f,n){var o=u.datasets[e];o?(o.syncPending=!0,u.saveDataSet(e),f&&f()):n&&n("unknown_dataset "+e,e)},forceSync:function(e,f,n){var o=u.datasets[e];if(o){o.syncForced=!0;var d=o.query_params;d.manualRefresh=!0,o.query_params=d,u.saveDataSet(e),f&&f()}else n&&n("unknown_dataset "+e,e)},sortObject:function(e){if("object"!=typeof e||null===e)return e;var f=[];return Object.keys(e).sort().forEach(function(n){f.push({key:n,value:u.sortObject(e[n])})}),f},sortedStringify:function(e){var f="";try{f=JSON.stringify(u.sortObject(e))}catch(n){console.error("Error stringifying sorted object:"+n)}return f},generateHash:function(e){var f=u.getHashMethod(u.sortedStringify(e));return f.toString()},shouldResendInflightPending:function(e,f){if(e.config&&e.config.resend_inflight_pendings_minutes>0&&f.inFlight&&f.inFlightDate&&!f.crashed){var n=(new Date).getTime(),o=n-f.inFlightDate;if(o>=e.config.resend_inflight_pendings_minutes*l)return!0}return!1},addPendingObj:function(e,f,n,o,d,i){function t(n){n.hash=n.hash||u.generateHash(n),u.getDataSet(e,function(i){i.pending[n.hash]=n,u.updateDatasetFromLocal(i,n),u.config.auto_sync_local_updates&&(i.syncPending=!0),u.saveDataSet(e),u.doNotify(e,f,u.notifications.LOCAL_UPDATE_APPLIED,o),d(n)},function(e,f){i&&i(e,f)})}u.isOnline(function(n){n||u.doNotify(e,f,u.notifications.OFFLINE_UPDATE,o)});var l={};l.inFlight=!1,l.action=o,l.post=JSON.parse(JSON.stringify(n)),l.postHash=u.generateHash(l.post),l.timestamp=(new Date).getTime(),"create"===o?(l.hash=u.generateHash(l),l.uid=l.hash,t(l)):u.read(e,f,function(e){l.uid=f,l.pre=e.data,l.preHash=u.generateHash(e.data),t(l)},function(e,f){i&&i(e,f)})},syncLoop:function(e){u.getDataSet(e,function(f){f.syncPending=!1,f.syncRunning=!0,f.syncLoopStart=(new Date).getTime(),u.doNotify(e,null,u.notifications.SYNC_STARTED,null),u.isOnline(function(n){if(n){var o={};o.fn="sync",o.dataset_id=e,o.query_params=f.query_params,o.config=f.config,o.meta_data=f.meta_data,o.dataset_hash=f.hash,o.acknowledgements=f.acknowledgements||[];var d=f.pending,i=[];for(var t in d)d[t].inFlight||d[t].crashed||d[t].delayed||(d[t].inFlight=!0,d[t].inFlightDate=(new Date).getTime(),i.push(d[t])),u.shouldResendInflightPending(f,d[t])&&i.push(d[t]);o.pending=i,i.length>0&&u.consoleLog("Starting sync loop - global hash = "+f.hash+" :: params = "+JSON.stringify(o,null,2)),u.doCloudCall({dataset_id:e,req:o},function(n){function o(n,o,i){if(n)for(var t in n)d=n[t],i.push(d),f.pending[t]&&f.pending[t].inFlight&&(delete f.pending[t],u.doNotify(e,d.uid,o,d))}var d;if(u.updateCrashedInFlightFromNewData(e,f,n),u.updateDelayedFromNewData(e,f,n),u.updateMetaFromNewData(e,f,n),n.updates){var i=[];u.checkUidChanges(f,n.updates.applied),o(n.updates.applied,u.notifications.REMOTE_UPDATE_APPLIED,i),o(n.updates.failed,u.notifications.REMOTE_UPDATE_FAILED,i),o(n.updates.collisions,u.notifications.COLLISION_DETECTED,i),f.acknowledgements=i}n.hash&&n.hash!==f.hash?(u.consoleLog("Local dataset stale - syncing records :: local hash= "+f.hash+" - remoteHash="+n.hash),u.syncRecords(e)):(u.consoleLog("Local dataset up to date"),u.syncComplete(e,"online",u.notifications.SYNC_COMPLETE))},function(n,o){u.markInFlightAsCrashed(f),u.consoleLog("syncLoop failed : msg="+n+" :: err = "+o),u.syncComplete(e,n,u.notifications.SYNC_FAILED)})}else u.syncComplete(e,"offline",u.notifications.SYNC_FAILED)})})},syncRecords:function(e){u.getDataSet(e,function(f){var n=f.data||{},o={};for(var d in n){var i=d,t=n[d].hash;o[i]=t}var l={};l.fn="syncRecords",l.dataset_id=e,l.query_params=f.query_params,l.clientRecs=o,u.consoleLog("syncRecParams :: "+JSON.stringify(l)),u.doCloudCall({dataset_id:e,req:l},function(o){u.consoleLog("syncRecords Res before applying pending changes :: "+JSON.stringify(o)),u.applyPendingChangesToRecords(f,o),u.consoleLog("syncRecords Res after apply pending changes :: "+JSON.stringify(o));var d;if(o.create)for(d in o.create)n[d]={hash:o.create[d].hash,data:o.create[d].data},u.doNotify(e,d,u.notifications.RECORD_DELTA_RECEIVED,"create");if(o.update)for(d in o.update)n[d].hash=o.update[d].hash,n[d].data=o.update[d].data,u.doNotify(e,d,u.notifications.RECORD_DELTA_RECEIVED,"update");if(o["delete"])for(d in o["delete"])delete n[d],u.doNotify(e,d,u.notifications.RECORD_DELTA_RECEIVED,"delete");u.doNotify(e,o.hash,u.notifications.DELTA_RECEIVED,"partial dataset"),f.data=n,o.hash&&(f.hash=o.hash),u.syncComplete(e,"online",u.notifications.SYNC_COMPLETE)},function(f,n){u.consoleLog("syncRecords failed : msg="+f+" :: err="+n),u.syncComplete(e,f,u.notifications.SYNC_FAILED)})})},syncComplete:function(e,f,n){u.getDataSet(e,function(o){o.syncRunning=!1,o.syncLoopEnd=(new Date).getTime();var d=o.query_params;d.manualRefresh=!1,o.query_params=d,u.saveDataSet(e),u.doNotify(e,o.hash,n,f)})},applyPendingChangesToRecords:function(e,f){var n=e.pending;for(var o in n)if(n.hasOwnProperty(o)){var d=n[o],i=d.uid;if(f.create){var t=f.create;t&&t[i]&&delete t[i]}if(f.update){var l=f.update;l&&l[i]&&delete l[i]}if(f["delete"]){var u=f["delete"];u&&u[i]&&delete u[i]}}},checkUidChanges:function(e,f){if(f){var n={},o=0;for(var d in f)if(f.hasOwnProperty(d)){var i=f[d],t=i.action;if(t&&"create"===t){var l=i.uid,p=i.hash;o++,u.uid_map[p]=l,n[p]=l;var s=e.data[p];s&&(e.data[l]=s,delete e.data[p]);var y=e.meta[p];y&&(e.meta[l]=y,delete e.meta[p])}}if(o>0)for(var c in e.pending)if(e.pending.hasOwnProperty(c)){var r=e.pending[c],a=r.uid;n[a]&&(r.uid=n[a])}}},checkDatasets:function(){for(var e in u.datasets)if(u.datasets.hasOwnProperty(e)){var f=u.datasets[e];if(f&&!f.syncRunning&&(f.config.sync_active||f.syncForced)){var n=f.syncLoopStart,o=f.syncLoopEnd;if(f.syncForced)f.syncPending=!0;else if(null==n)u.consoleLog(e+" - Performing initial sync"),f.syncPending=!0;else if(null!=o){var d=(new Date).getTime()-o,i=1e3*f.config.sync_frequency;d>i&&(f.syncPending=!0)}f.syncPending&&(f.syncForced=!1,u.syncLoop(e))}}},setCloudHandler:function(e){e&&"function"==typeof e?u.cloudHandler=e:u.consoleLog("setCloudHandler called  with wrong parameter")},doCloudCall:function(e,f,n){u.cloudHandler&&"function"==typeof u.cloudHandler?(e&&e.req&&(e.req.__fh={cuid:t.getClientId()}),u.cloudHandler(e,f,n)):console.log("Missing cloud handler for sync. Please refer to documentation")},datasetMonitor:function(){u.checkDatasets(),setTimeout(function(){u.datasetMonitor()},500)},setStorageAdapter:function(e){u.getStorageAdapter=e},setHashMethod:function(e){e&&"function"==typeof e?u.getHashMethod=e:u.consoleLog("setHashMethod called  with wrong parameter")},getStorageAdapter:function(e,f,n){var o=function(n,o){var d=(f?"save to":"load from")+" local storage failed msg: "+n+" err: "+o;u.doNotify(e,null,u.notifications.CLIENT_STORAGE_FAILED,d),u.consoleLog(d)};d({fail:o,adapter:u.config.storage_strategy,size:u.config.file_system_quota,backup:u.config.icloud_backup},function(){return n(null,this)})},getHashMethod:o.SHA1,saveDataSet:function(e,f){u.getDataSet(e,function(n){u.getStorageAdapter(e,!0,function(o,d){d.save({key:"dataset_"+e,val:n},function(){return f?f():void 0})})})},loadDataSet:function(e,f,n){u.getStorageAdapter(e,!1,function(o,d){d.get("dataset_"+e,function(o){if(o&&o.val){var d=o.val;if("string"==typeof d&&(d=JSON.parse(d)),d.initialised=!1,u.datasets[e]=d,u.consoleLog("load from local storage success for dataset_id :"+e),f)return f(d)}else if(n)return n()})})},clearCache:function(e,f){delete u.datasets[e],u.notify_callback_map[e]=null,u.getStorageAdapter(e,!0,function(n,o){o.remove("dataset_"+e,function(){return u.consoleLog("local cache is cleared for dataset : "+e),f?f():void 0})})},updateDatasetFromLocal:function(e,f){var n,o,d=e.pending,i=f.uid;u.consoleLog("updating local dataset for uid "+i+" - action = "+f.action),e.meta[i]=e.meta[i]||{},"create"===f.action&&(e.data[i]&&(u.consoleLog("dataset already exists for uid in create :: "+JSON.stringify(e.data[i])),e.meta[i].fromPending&&(n=e.meta[i].pendingUid,delete d[n])),e.data[i]={}),"update"===f.action&&e.data[i]&&e.meta[i].fromPending&&(u.consoleLog("updating an existing pending record for dataset :: "+JSON.stringify(e.data[i])),n=e.meta[i].pendingUid,o=d[n],o&&(o.inFlight?(u.consoleLog("existing in-inflight pending record = "+JSON.stringify(o)),f.delayed=!0,f.waiting=o.hash):(u.consoleLog("existing pre-flight pending record = "+JSON.stringify(o)),o.post=f.post,o.postHash=f.postHash,delete d[f.hash],f.hash=n))),"delete"===f.action&&e.data[i]&&(e.meta[i].fromPending&&(u.consoleLog("Deleting an existing pending record for dataset :: "+JSON.stringify(e.data[i])),n=e.meta[i].pendingUid,o=d[n],o&&(o.inFlight?(u.consoleLog("existing in-inflight pending record = "+JSON.stringify(o)),f.delayed=!0,f.waiting=o.hash):(u.consoleLog("existing pending record = "+JSON.stringify(o)),"create"===o.action&&(delete d[f.hash],delete d[n]),"update"===o.action&&(f.pre=o.pre,f.preHash=o.preHash,f.inFlight=!1,delete d[n])))),delete e.data[i]),e.data[i]&&(e.data[i].data=f.post,e.data[i].hash=f.postHash,e.meta[i].fromPending=!0,e.meta[i].pendingUid=f.hash)},updateCrashedInFlightFromNewData:function(e,f,n){var o,d,i=({applied:u.notifications.REMOTE_UPDATE_APPLIED,failed:u.notifications.REMOTE_UPDATE_FAILED,collisions:u.notifications.COLLISION_DETECTED},f.pending);if(i){for(o in i)if(i.hasOwnProperty(o)&&(d=i[o],d.inFlight&&d.crashed))if(u.consoleLog("updateCrashedInFlightFromNewData - Found crashed inFlight pending record uid="+d.uid+" :: hash="+d.hash),n&&n.updates&&n.updates.hashes){var t=n.updates.hashes[o];t||(d.crashedCount?d.crashedCount++:d.crashedCount=1)}else d.crashedCount?d.crashedCount++:d.crashedCount=1;for(o in i)i.hasOwnProperty(o)&&(d=i[o],d.inFlight&&d.crashed&&d.crashedCount>f.config.crashed_count_wait&&(u.consoleLog("updateCrashedInFlightFromNewData - Crashed inflight pending record has reached crashed_count_wait limit : "+JSON.stringify(d)),u.consoleLog("updateCrashedInFlightFromNewData - Retryig crashed inflight pending record"),d.crashed=!1,d.inFlight=!1))}},updateDelayedFromNewData:function(e,f,n){var o,d,i=f.pending;if(i)for(o in i)if(i.hasOwnProperty(o)&&(d=i[o],d.delayed&&d.waiting&&(u.consoleLog("updateDelayedFromNewData - Found delayed pending record uid="+d.uid+" :: hash="+d.hash+" :: waiting="+d.waiting),n&&n.updates&&n.updates.hashes))){var t=n.updates.hashes[d.waiting];t&&(u.consoleLog("updateDelayedFromNewData - Waiting pending record is resolved rec="+JSON.stringify(t)),d.delayed=!1,d.waiting=void 0)}},updateMetaFromNewData:function(e,f,n){var o=f.meta;if(o&&n&&n.updates&&n.updates.hashes)for(var d in o)if(o.hasOwnProperty(d)){var i=o[d],t=i.pendingUid;u.consoleLog("updateMetaFromNewData - Found metadata with uid = "+d+" :: pendingHash = "+t);var l=!0;if(t){l=!1;var p=n.updates.hashes[t];p&&(u.consoleLog("updateMetaFromNewData - Found pendingUid in meta data resolved - resolved = "+JSON.stringify(p)),i.pendingUid=void 0,l=!0)}l&&(u.consoleLog("updateMetaFromNewData - both previous and current pendings are resolved for meta data with uid "+d+". Delete it."),delete o[d])}},markInFlightAsCrashed:function(e){var f,n,o=e.pending;if(o){var d={};for(f in o)o.hasOwnProperty(f)&&(n=o[f],n.inFlight&&(u.consoleLog("Marking in flight pending record as crashed : "+f),n.crashed=!0,d[n.uid]=n))}},consoleLog:function(e){u.config.do_console_log&&console.log(e)}};!function(){u.config=u.defaults}(),u.setCloudHandler(i.handler),f.exports={init:u.init,manage:u.manage,notify:u.notify,doList:u.list,getUID:u.getUID,doCreate:u.create,doRead:u.read,doUpdate:u.update,doDelete:u["delete"],listCollisions:u.listCollisions,removeCollision:u.removeCollision,getPending:u.getPending,clearPending:u.clearPending,getDataset:u.getDataSet,getQueryParams:u.getQueryParams,setQueryParams:u.setQueryParams,getMetaData:u.getMetaData,setMetaData:u.setMetaData,getConfig:u.getConfig,setConfig:u.setConfig,startSync:u.startSync,stopSync:u.stopSync,doSync:u.doSync,forceSync:u.forceSync,generateHash:u.generateHash,loadDataSet:u.loadDataSet,clearCache:u.clearCache,doCloudCall:u.doCloudCall,setCloudHandler:u.setCloudHandler,setStorageAdapter:u.setStorageAdapter,setHashMethod:u.setHashMethod,setNetworkStatusHandler:u.setNetworkStatusHandler}},{"../libs/generated/crypto":11,"../libs/generated/lawnchair":12,"./clientIdProvider":18,"./cloudHandler":19}],22:[function(f,n,o){!function(f){
var o="undefined";!function(f,o){"undefined"!=typeof n?n.exports=o():"function"==typeof e&&"object"==typeof e.amd?e(o):this[f]=o()}("log",function(){function e(e){return typeof console===o?y:console[e]===f?console.log!==f?n(console,"log"):y:n(console,e)}function n(e,n){var o=e[n];if(o.bind!==f)return e[n].bind(e);if(Function.prototype.bind===f)return d(o,e);try{return Function.prototype.bind.call(e[n],e)}catch(i){return d(o,e)}}function d(e,f){return function(){Function.prototype.apply.apply(e,[f,arguments])}}function i(e){for(var f=0;f<c.length;f++)s[c[f]]=e(c[f])}function t(){return typeof window!==o&&window.document!==f&&window.document.cookie!==f}function l(){try{return typeof window!==o&&window.localStorage!==f}catch(e){return!1}}function u(e){var f,n=!1;for(var o in s.levels)if(s.levels.hasOwnProperty(o)&&s.levels[o]===e){f=o;break}if(l())try{window.localStorage.loglevel=f}catch(d){n=!0}else n=!0;n&&t()&&(window.document.cookie="loglevel="+f+";")}function p(){var e;if(l()&&(e=window.localStorage.loglevel),e===f&&t()){var n=r.exec(window.document.cookie)||[];e=n[1]}s.levels[e]===f&&(e="WARN"),s.setLevel(s.levels[e])}var s={},y=function(){},c=["trace","debug","info","warn","error"],r=/loglevel=([^;]+)/;return s.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},s.setLevel=function(n){if("number"==typeof n&&n>=0&&n<=s.levels.SILENT){if(u(n),n===s.levels.SILENT)return void i(function(){return y});if(typeof console===o)return i(function(e){return function(){typeof console!==o&&(s.setLevel(n),s[e].apply(s,arguments))}}),"No console available for logging";i(function(f){return n<=s.levels[f.toUpperCase()]?e(f):y})}else{if("string"!=typeof n||s.levels[n.toUpperCase()]===f)throw"log.setLevel() called with invalid level: "+n;s.setLevel(s.levels[n.toUpperCase()])}},s.enableAll=function(){s.setLevel(s.levels.TRACE)},s.disableAll=function(){s.setLevel(s.levels.SILENT)},p(),s})}()},{}],23:[function(f,n,o){(function(f){!function(d){function i(e){throw RangeError(I[e])}function t(e,f){for(var n=e.length;n--;)e[n]=f(e[n]);return e}function l(e,f){return t(e.split(H),f).join(".")}function u(e){for(var f,n,o=[],d=0,i=e.length;i>d;)f=e.charCodeAt(d++),f>=55296&&56319>=f&&i>d?(n=e.charCodeAt(d++),56320==(64512&n)?o.push(((1023&f)<<10)+(1023&n)+65536):(o.push(f),d--)):o.push(f);return o}function p(e){return t(e,function(e){var f="";return e>65535&&(e-=65536,f+=L(e>>>10&1023|55296),e=56320|1023&e),f+=L(e)}).join("")}function s(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:k}function y(e,f){return e+22+75*(26>e)-((0!=f)<<5)}function c(e,f,n){var o=0;for(e=n?K(e/B):e>>1,e+=K(e/f);e>J*z>>1;o+=k)e=K(e/J);return K(o+(J+1)*e/(e+A))}function r(e){var f,n,o,d,t,l,u,y,r,a,w=[],b=e.length,g=0,m=D,x=C;for(n=e.lastIndexOf(E),0>n&&(n=0),o=0;n>o;++o)e.charCodeAt(o)>=128&&i("not-basic"),w.push(e.charCodeAt(o));for(d=n>0?n+1:0;b>d;){for(t=g,l=1,u=k;d>=b&&i("invalid-input"),y=s(e.charCodeAt(d++)),(y>=k||y>K((v-g)/l))&&i("overflow"),g+=y*l,r=x>=u?q:u>=x+z?z:u-x,!(r>y);u+=k)a=k-r,l>K(v/a)&&i("overflow"),l*=a;f=w.length+1,x=c(g-t,f,0==t),K(g/f)>v-m&&i("overflow"),m+=K(g/f),g%=f,w.splice(g++,0,m)}return p(w)}function a(e){var f,n,o,d,t,l,p,s,r,a,w,b,g,m,x,h=[];for(e=u(e),b=e.length,f=D,n=0,t=C,l=0;b>l;++l)w=e[l],128>w&&h.push(L(w));for(o=d=h.length,d&&h.push(E);b>o;){for(p=v,l=0;b>l;++l)w=e[l],w>=f&&p>w&&(p=w);for(g=o+1,p-f>K((v-n)/g)&&i("overflow"),n+=(p-f)*g,f=p,l=0;b>l;++l)if(w=e[l],f>w&&++n>v&&i("overflow"),w==f){for(s=n,r=k;a=t>=r?q:r>=t+z?z:r-t,!(a>s);r+=k)x=s-a,m=k-a,h.push(L(y(a+x%m,0))),s=K(x/m);h.push(L(y(s,0))),t=c(n,g,o==d),n=0,++o}++n,++f}return h.join("")}function w(e){return l(e,function(e){return F.test(e)?r(e.slice(4).toLowerCase()):e})}function b(e){return l(e,function(e){return G.test(e)?"xn--"+a(e):e})}var g="object"==typeof o&&o,m="object"==typeof n&&n&&n.exports==g&&n,x="object"==typeof f&&f;(x.global===x||x.window===x)&&(d=x);var h,j,v=2147483647,k=36,q=1,z=26,A=38,B=700,C=72,D=128,E="-",F=/^xn--/,G=/[^ -~]/,H=/\x2E|\u3002|\uFF0E|\uFF61/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},J=k-q,K=Math.floor,L=String.fromCharCode;if(h={version:"1.2.4",ucs2:{decode:u,encode:p},decode:r,encode:a,toASCII:b,toUnicode:w},"function"==typeof e&&"object"==typeof e.amd&&e.amd)e("punycode",function(){return h});else if(g&&!g.nodeType)if(m)m.exports=h;else for(j in h)h.hasOwnProperty(j)&&(g[j]=h[j]);else d.punycode=h}(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],24:[function(e,f,n){"use strict";function o(e,f){return Object.prototype.hasOwnProperty.call(e,f)}f.exports=function(e,f,n,i){f=f||"&",n=n||"=";var t={};if("string"!=typeof e||0===e.length)return t;var l=/\+/g;e=e.split(f);var u=1e3;i&&"number"==typeof i.maxKeys&&(u=i.maxKeys);var p=e.length;u>0&&p>u&&(p=u);for(var s=0;p>s;++s){var y,c,r,a,w=e[s].replace(l,"%20"),b=w.indexOf(n);b>=0?(y=w.substr(0,b),c=w.substr(b+1)):(y=w,c=""),r=decodeURIComponent(y),a=decodeURIComponent(c),o(t,r)?d(t[r])?t[r].push(a):t[r]=[t[r],a]:t[r]=a}return t};var d=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],25:[function(e,f,n){"use strict";function o(e,f){if(e.map)return e.map(f);for(var n=[],o=0;o<e.length;o++)n.push(f(e[o],o));return n}var d=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};f.exports=function(e,f,n,l){return f=f||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?o(t(e),function(o){var t=encodeURIComponent(d(o))+n;return i(e[o])?e[o].map(function(e){return t+encodeURIComponent(d(e))}).join(f):t+encodeURIComponent(d(e[o]))}).join(f):l?encodeURIComponent(d(l))+n+encodeURIComponent(d(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},t=Object.keys||function(e){var f=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&f.push(n);return f}},{}],26:[function(e,f,n){"use strict";n.decode=n.parse=e("./decode"),n.encode=n.stringify=e("./encode")},{"./decode":24,"./encode":25}],27:[function(e,f,n){var o=Object.prototype.toString;f.exports=function(e){switch(o.call(e)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object String]":return"string"}if("object"==typeof e&&e&&"number"==typeof e.length)try{if("function"==typeof e.callee)return"arguments"}catch(f){if(f instanceof TypeError)return"arguments"}return null===e?"null":void 0===e?"undefined":e&&1===e.nodeType?"element":e===Object(e)?"object":typeof e}},{}],28:[function(f,n,o){(function(){var f=this,d=f._,i={},t=Array.prototype,l=Object.prototype,u=Function.prototype,p=t.push,s=t.slice,y=t.concat,c=l.toString,r=l.hasOwnProperty,a=t.forEach,w=t.map,b=t.reduce,g=t.reduceRight,m=t.filter,x=t.every,h=t.some,j=t.indexOf,v=t.lastIndexOf,k=Array.isArray,q=Object.keys,z=u.bind,A=function(e){return e instanceof A?e:this instanceof A?void(this._wrapped=e):new A(e)};"undefined"!=typeof o?("undefined"!=typeof n&&n.exports&&(o=n.exports=A),o._=A):f._=A,A.VERSION="1.6.0";var B=A.each=A.forEach=function(e,f,n){if(null==e)return e;if(a&&e.forEach===a)e.forEach(f,n);else if(e.length===+e.length){for(var o=0,d=e.length;d>o;o++)if(f.call(n,e[o],o,e)===i)return}else for(var t=A.keys(e),o=0,d=t.length;d>o;o++)if(f.call(n,e[t[o]],t[o],e)===i)return;return e};A.map=A.collect=function(e,f,n){var o=[];return null==e?o:w&&e.map===w?e.map(f,n):(B(e,function(e,d,i){o.push(f.call(n,e,d,i))}),o)};var C="Reduce of empty array with no initial value";A.reduce=A.foldl=A.inject=function(e,f,n,o){var d=arguments.length>2;if(null==e&&(e=[]),b&&e.reduce===b)return o&&(f=A.bind(f,o)),d?e.reduce(f,n):e.reduce(f);if(B(e,function(e,i,t){d?n=f.call(o,n,e,i,t):(n=e,d=!0)}),!d)throw new TypeError(C);return n},A.reduceRight=A.foldr=function(e,f,n,o){var d=arguments.length>2;if(null==e&&(e=[]),g&&e.reduceRight===g)return o&&(f=A.bind(f,o)),d?e.reduceRight(f,n):e.reduceRight(f);var i=e.length;if(i!==+i){var t=A.keys(e);i=t.length}if(B(e,function(l,u,p){u=t?t[--i]:--i,d?n=f.call(o,n,e[u],u,p):(n=e[u],d=!0)}),!d)throw new TypeError(C);return n},A.find=A.detect=function(e,f,n){var o;return D(e,function(e,d,i){return f.call(n,e,d,i)?(o=e,!0):void 0}),o},A.filter=A.select=function(e,f,n){var o=[];return null==e?o:m&&e.filter===m?e.filter(f,n):(B(e,function(e,d,i){f.call(n,e,d,i)&&o.push(e)}),o)},A.reject=function(e,f,n){return A.filter(e,function(e,o,d){return!f.call(n,e,o,d)},n)},A.every=A.all=function(e,f,n){f||(f=A.identity);var o=!0;return null==e?o:x&&e.every===x?e.every(f,n):(B(e,function(e,d,t){return(o=o&&f.call(n,e,d,t))?void 0:i}),!!o)};var D=A.some=A.any=function(e,f,n){f||(f=A.identity);var o=!1;return null==e?o:h&&e.some===h?e.some(f,n):(B(e,function(e,d,t){return o||(o=f.call(n,e,d,t))?i:void 0}),!!o)};A.contains=A.include=function(e,f){return null==e?!1:j&&e.indexOf===j?-1!=e.indexOf(f):D(e,function(e){return e===f})},A.invoke=function(e,f){var n=s.call(arguments,2),o=A.isFunction(f);return A.map(e,function(e){return(o?f:e[f]).apply(e,n)})},A.pluck=function(e,f){return A.map(e,A.property(f))},A.where=function(e,f){return A.filter(e,A.matches(f))},A.findWhere=function(e,f){return A.find(e,A.matches(f))},A.max=function(e,f,n){if(!f&&A.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);var o=-(1/0),d=-(1/0);return B(e,function(e,i,t){var l=f?f.call(n,e,i,t):e;l>d&&(o=e,d=l)}),o},A.min=function(e,f,n){if(!f&&A.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);var o=1/0,d=1/0;return B(e,function(e,i,t){var l=f?f.call(n,e,i,t):e;d>l&&(o=e,d=l)}),o},A.shuffle=function(e){var f,n=0,o=[];return B(e,function(e){f=A.random(n++),o[n-1]=o[f],o[f]=e}),o},A.sample=function(e,f,n){return null==f||n?(e.length!==+e.length&&(e=A.values(e)),e[A.random(e.length-1)]):A.shuffle(e).slice(0,Math.max(0,f))};var E=function(e){return null==e?A.identity:A.isFunction(e)?e:A.property(e)};A.sortBy=function(e,f,n){return f=E(f),A.pluck(A.map(e,function(e,o,d){return{value:e,index:o,criteria:f.call(n,e,o,d)}}).sort(function(e,f){var n=e.criteria,o=f.criteria;if(n!==o){if(n>o||void 0===n)return 1;if(o>n||void 0===o)return-1}return e.index-f.index}),"value")};var F=function(e){return function(f,n,o){var d={};return n=E(n),B(f,function(i,t){var l=n.call(o,i,t,f);e(d,l,i)}),d}};A.groupBy=F(function(e,f,n){A.has(e,f)?e[f].push(n):e[f]=[n]}),A.indexBy=F(function(e,f,n){e[f]=n}),A.countBy=F(function(e,f){A.has(e,f)?e[f]++:e[f]=1}),A.sortedIndex=function(e,f,n,o){n=E(n);for(var d=n.call(o,f),i=0,t=e.length;t>i;){var l=i+t>>>1;n.call(o,e[l])<d?i=l+1:t=l}return i},A.toArray=function(e){return e?A.isArray(e)?s.call(e):e.length===+e.length?A.map(e,A.identity):A.values(e):[]},A.size=function(e){return null==e?0:e.length===+e.length?e.length:A.keys(e).length},A.first=A.head=A.take=function(e,f,n){return null==e?void 0:null==f||n?e[0]:0>f?[]:s.call(e,0,f)},A.initial=function(e,f,n){return s.call(e,0,e.length-(null==f||n?1:f))},A.last=function(e,f,n){return null==e?void 0:null==f||n?e[e.length-1]:s.call(e,Math.max(e.length-f,0))},A.rest=A.tail=A.drop=function(e,f,n){return s.call(e,null==f||n?1:f)},A.compact=function(e){return A.filter(e,A.identity)};var G=function(e,f,n){return f&&A.every(e,A.isArray)?y.apply(n,e):(B(e,function(e){A.isArray(e)||A.isArguments(e)?f?p.apply(n,e):G(e,f,n):n.push(e)}),n)};A.flatten=function(e,f){return G(e,f,[])},A.without=function(e){return A.difference(e,s.call(arguments,1))},A.partition=function(e,f){var n=[],o=[];return B(e,function(e){(f(e)?n:o).push(e)}),[n,o]},A.uniq=A.unique=function(e,f,n,o){A.isFunction(f)&&(o=n,n=f,f=!1);var d=n?A.map(e,n,o):e,i=[],t=[];return B(d,function(n,o){(f?o&&t[t.length-1]===n:A.contains(t,n))||(t.push(n),i.push(e[o]))}),i},A.union=function(){return A.uniq(A.flatten(arguments,!0))},A.intersection=function(e){var f=s.call(arguments,1);return A.filter(A.uniq(e),function(e){return A.every(f,function(f){return A.contains(f,e)})})},A.difference=function(e){var f=y.apply(t,s.call(arguments,1));return A.filter(e,function(e){return!A.contains(f,e)})},A.zip=function(){for(var e=A.max(A.pluck(arguments,"length").concat(0)),f=new Array(e),n=0;e>n;n++)f[n]=A.pluck(arguments,""+n);return f},A.object=function(e,f){if(null==e)return{};for(var n={},o=0,d=e.length;d>o;o++)f?n[e[o]]=f[o]:n[e[o][0]]=e[o][1];return n},A.indexOf=function(e,f,n){if(null==e)return-1;var o=0,d=e.length;if(n){if("number"!=typeof n)return o=A.sortedIndex(e,f),e[o]===f?o:-1;o=0>n?Math.max(0,d+n):n}if(j&&e.indexOf===j)return e.indexOf(f,n);for(;d>o;o++)if(e[o]===f)return o;return-1},A.lastIndexOf=function(e,f,n){if(null==e)return-1;var o=null!=n;if(v&&e.lastIndexOf===v)return o?e.lastIndexOf(f,n):e.lastIndexOf(f);for(var d=o?n:e.length;d--;)if(e[d]===f)return d;return-1},A.range=function(e,f,n){arguments.length<=1&&(f=e||0,e=0),n=arguments[2]||1;for(var o=Math.max(Math.ceil((f-e)/n),0),d=0,i=new Array(o);o>d;)i[d++]=e,e+=n;return i};var H=function(){};A.bind=function(e,f){var n,o;if(z&&e.bind===z)return z.apply(e,s.call(arguments,1));if(!A.isFunction(e))throw new TypeError;return n=s.call(arguments,2),o=function(){if(!(this instanceof o))return e.apply(f,n.concat(s.call(arguments)));H.prototype=e.prototype;var d=new H;H.prototype=null;var i=e.apply(d,n.concat(s.call(arguments)));return Object(i)===i?i:d}},A.partial=function(e){var f=s.call(arguments,1);return function(){for(var n=0,o=f.slice(),d=0,i=o.length;i>d;d++)o[d]===A&&(o[d]=arguments[n++]);for(;n<arguments.length;)o.push(arguments[n++]);return e.apply(this,o)}},A.bindAll=function(e){var f=s.call(arguments,1);if(0===f.length)throw new Error("bindAll must be passed function names");return B(f,function(f){e[f]=A.bind(e[f],e)}),e},A.memoize=function(e,f){var n={};return f||(f=A.identity),function(){var o=f.apply(this,arguments);return A.has(n,o)?n[o]:n[o]=e.apply(this,arguments)}},A.delay=function(e,f){var n=s.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},f)},A.defer=function(e){return A.delay.apply(A,[e,1].concat(s.call(arguments,1)))},A.throttle=function(e,f,n){var o,d,i,t=null,l=0;n||(n={});var u=function(){l=n.leading===!1?0:A.now(),t=null,i=e.apply(o,d),o=d=null};return function(){var p=A.now();l||n.leading!==!1||(l=p);var s=f-(p-l);return o=this,d=arguments,0>=s?(clearTimeout(t),t=null,l=p,i=e.apply(o,d),o=d=null):t||n.trailing===!1||(t=setTimeout(u,s)),i}},A.debounce=function(e,f,n){var o,d,i,t,l,u=function(){var p=A.now()-t;f>p?o=setTimeout(u,f-p):(o=null,n||(l=e.apply(i,d),i=d=null))};return function(){i=this,d=arguments,t=A.now();var p=n&&!o;return o||(o=setTimeout(u,f)),p&&(l=e.apply(i,d),i=d=null),l}},A.once=function(e){var f,n=!1;return function(){return n?f:(n=!0,f=e.apply(this,arguments),e=null,f)}},A.wrap=function(e,f){return A.partial(f,e)},A.compose=function(){var e=arguments;return function(){for(var f=arguments,n=e.length-1;n>=0;n--)f=[e[n].apply(this,f)];return f[0]}},A.after=function(e,f){return function(){return--e<1?f.apply(this,arguments):void 0}},A.keys=function(e){if(!A.isObject(e))return[];if(q)return q(e);var f=[];for(var n in e)A.has(e,n)&&f.push(n);return f},A.values=function(e){for(var f=A.keys(e),n=f.length,o=new Array(n),d=0;n>d;d++)o[d]=e[f[d]];return o},A.pairs=function(e){for(var f=A.keys(e),n=f.length,o=new Array(n),d=0;n>d;d++)o[d]=[f[d],e[f[d]]];return o},A.invert=function(e){for(var f={},n=A.keys(e),o=0,d=n.length;d>o;o++)f[e[n[o]]]=n[o];return f},A.functions=A.methods=function(e){var f=[];for(var n in e)A.isFunction(e[n])&&f.push(n);return f.sort()},A.extend=function(e){return B(s.call(arguments,1),function(f){if(f)for(var n in f)e[n]=f[n]}),e},A.pick=function(e){var f={},n=y.apply(t,s.call(arguments,1));return B(n,function(n){n in e&&(f[n]=e[n])}),f},A.omit=function(e){var f={},n=y.apply(t,s.call(arguments,1));for(var o in e)A.contains(n,o)||(f[o]=e[o]);return f},A.defaults=function(e){return B(s.call(arguments,1),function(f){if(f)for(var n in f)void 0===e[n]&&(e[n]=f[n])}),e},A.clone=function(e){return A.isObject(e)?A.isArray(e)?e.slice():A.extend({},e):e},A.tap=function(e,f){return f(e),e};var I=function(e,f,n,o){if(e===f)return 0!==e||1/e==1/f;if(null==e||null==f)return e===f;e instanceof A&&(e=e._wrapped),f instanceof A&&(f=f._wrapped);var d=c.call(e);if(d!=c.call(f))return!1;switch(d){case"[object String]":return e==String(f);case"[object Number]":return e!=+e?f!=+f:0==e?1/e==1/f:e==+f;case"[object Date]":case"[object Boolean]":return+e==+f;case"[object RegExp]":return e.source==f.source&&e.global==f.global&&e.multiline==f.multiline&&e.ignoreCase==f.ignoreCase}if("object"!=typeof e||"object"!=typeof f)return!1;for(var i=n.length;i--;)if(n[i]==e)return o[i]==f;var t=e.constructor,l=f.constructor;if(t!==l&&!(A.isFunction(t)&&t instanceof t&&A.isFunction(l)&&l instanceof l)&&"constructor"in e&&"constructor"in f)return!1;n.push(e),o.push(f);var u=0,p=!0;if("[object Array]"==d){if(u=e.length,p=u==f.length)for(;u--&&(p=I(e[u],f[u],n,o)););}else{for(var s in e)if(A.has(e,s)&&(u++,!(p=A.has(f,s)&&I(e[s],f[s],n,o))))break;if(p){for(s in f)if(A.has(f,s)&&!u--)break;p=!u}}return n.pop(),o.pop(),p};A.isEqual=function(e,f){return I(e,f,[],[])},A.isEmpty=function(e){if(null==e)return!0;if(A.isArray(e)||A.isString(e))return 0===e.length;for(var f in e)if(A.has(e,f))return!1;return!0},A.isElement=function(e){return!(!e||1!==e.nodeType)},A.isArray=k||function(e){return"[object Array]"==c.call(e)},A.isObject=function(e){return e===Object(e)},B(["Arguments","Function","String","Number","Date","RegExp"],function(e){A["is"+e]=function(f){return c.call(f)=="[object "+e+"]"}}),A.isArguments(arguments)||(A.isArguments=function(e){return!(!e||!A.has(e,"callee"))}),"function"!=typeof/./&&(A.isFunction=function(e){return"function"==typeof e}),A.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},A.isNaN=function(e){return A.isNumber(e)&&e!=+e},A.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==c.call(e)},A.isNull=function(e){return null===e},A.isUndefined=function(e){return void 0===e},A.has=function(e,f){return r.call(e,f)},A.noConflict=function(){return f._=d,this},A.identity=function(e){return e},A.constant=function(e){return function(){return e}},A.property=function(e){return function(f){return f[e]}},A.matches=function(e){return function(f){if(f===e)return!0;for(var n in e)if(e[n]!==f[n])return!1;return!0}},A.times=function(e,f,n){for(var o=Array(Math.max(0,e)),d=0;e>d;d++)o[d]=f.call(n,d);return o},A.random=function(e,f){return null==f&&(f=e,e=0),e+Math.floor(Math.random()*(f-e+1))},A.now=Date.now||function(){return(new Date).getTime()};var J={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};J.unescape=A.invert(J.escape);var K={escape:new RegExp("["+A.keys(J.escape).join("")+"]","g"),unescape:new RegExp("("+A.keys(J.unescape).join("|")+")","g")};A.each(["escape","unescape"],function(e){A[e]=function(f){return null==f?"":(""+f).replace(K[e],function(f){return J[e][f]})}}),A.result=function(e,f){if(null==e)return void 0;var n=e[f];return A.isFunction(n)?n.call(e):n},A.mixin=function(e){B(A.functions(e),function(f){var n=A[f]=e[f];A.prototype[f]=function(){var e=[this._wrapped];return p.apply(e,arguments),P.call(this,n.apply(A,e))}})};var L=0;A.uniqueId=function(e){var f=++L+"";return e?e+f:f},A.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var M=/(.)^/,N={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},O=/\\|'|\r|\n|\t|\u2028|\u2029/g;A.template=function(e,f,n){var o;n=A.defaults({},n,A.templateSettings);var d=new RegExp([(n.escape||M).source,(n.interpolate||M).source,(n.evaluate||M).source].join("|")+"|$","g"),i=0,t="__p+='";e.replace(d,function(f,n,o,d,l){return t+=e.slice(i,l).replace(O,function(e){return"\\"+N[e]}),n&&(t+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),o&&(t+="'+\n((__t=("+o+"))==null?'':__t)+\n'"),d&&(t+="';\n"+d+"\n__p+='"),i=l+f.length,f}),t+="';\n",n.variable||(t="with(obj||{}){\n"+t+"}\n"),t="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+t+"return __p;\n";try{o=new Function(n.variable||"obj","_",t)}catch(l){throw l.source=t,l}if(f)return o(f,A);var u=function(e){return o.call(this,e,A)};return u.source="function("+(n.variable||"obj")+"){\n"+t+"}",u},A.chain=function(e){return A(e).chain()};var P=function(e){return this._chain?A(e).chain():e};A.mixin(A),B(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var f=t[e];A.prototype[e]=function(){var n=this._wrapped;return f.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],P.call(this,n)}}),B(["concat","join","slice"],function(e){var f=t[e];A.prototype[e]=function(){return P.call(this,f.apply(this._wrapped,arguments))}}),A.extend(A.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof e&&e.amd&&e("underscore",[],function(){return A})}).call(this)},{}],29:[function(e,f,n){function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function d(e,f,n){if(e&&p(e)&&e instanceof o)return e;var d=new o;return d.parse(e,f,n),d}function i(e){return u(e)&&(e=d(e)),e instanceof o?e.format():o.prototype.format.call(e)}function t(e,f){return d(e,!1,!0).resolve(f)}function l(e,f){return e?d(e,!1,!0).resolveObject(f):f}function u(e){return"string"==typeof e}function p(e){return"object"==typeof e&&null!==e}function s(e){return null===e}function y(e){return null==e}var c=e("punycode");n.parse=d,n.resolve=t,n.resolveObject=l,n.format=i,n.Url=o;var r=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,w=["<",">",'"',"`"," ","\r","\n","	"],b=["{","}","|","\\","^","`"].concat(w),g=["'"].concat(b),m=["%","/","?",";","#"].concat(g),x=["/","?","#"],h=255,j=/^[a-z0-9A-Z_-]{0,63}$/,v=/^([a-z0-9A-Z_-]{0,63})(.*)$/,k={javascript:!0,"javascript:":!0},q={javascript:!0,"javascript:":!0},z={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},A=e("querystring");o.prototype.parse=function(e,f,n){if(!u(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var o=e;o=o.trim();var d=r.exec(o);if(d){d=d[0];var i=d.toLowerCase();this.protocol=i,o=o.substr(d.length)}if(n||d||o.match(/^\/\/[^@\/]+@[^@\/]+/)){var t="//"===o.substr(0,2);!t||d&&q[d]||(o=o.substr(2),this.slashes=!0)}if(!q[d]&&(t||d&&!z[d])){for(var l=-1,p=0;p<x.length;p++){var s=o.indexOf(x[p]);-1!==s&&(-1===l||l>s)&&(l=s)}var y,a;a=-1===l?o.lastIndexOf("@"):o.lastIndexOf("@",l),-1!==a&&(y=o.slice(0,a),o=o.slice(a+1),this.auth=decodeURIComponent(y)),l=-1;for(var p=0;p<m.length;p++){var s=o.indexOf(m[p]);-1!==s&&(-1===l||l>s)&&(l=s)}-1===l&&(l=o.length),this.host=o.slice(0,l),o=o.slice(l),this.parseHost(),this.hostname=this.hostname||"";var w="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!w)for(var b=this.hostname.split(/\./),p=0,B=b.length;B>p;p++){var C=b[p];if(C&&!C.match(j)){for(var D="",E=0,F=C.length;F>E;E++)D+=C.charCodeAt(E)>127?"x":C[E];if(!D.match(j)){var G=b.slice(0,p),H=b.slice(p+1),I=C.match(v);I&&(G.push(I[1]),H.unshift(I[2])),H.length&&(o="/"+H.join(".")+o),this.hostname=G.join(".");break}}}if(this.hostname.length>h?this.hostname="":this.hostname=this.hostname.toLowerCase(),!w){for(var J=this.hostname.split("."),K=[],p=0;p<J.length;++p){var L=J[p];K.push(L.match(/[^A-Za-z0-9_-]/)?"xn--"+c.encode(L):L)}this.hostname=K.join(".")}var M=this.port?":"+this.port:"",N=this.hostname||"";this.host=N+M,this.href+=this.host,w&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==o[0]&&(o="/"+o))}if(!k[i])for(var p=0,B=g.length;B>p;p++){var O=g[p],P=encodeURIComponent(O);P===O&&(P=escape(O)),o=o.split(O).join(P)}var Q=o.indexOf("#");-1!==Q&&(this.hash=o.substr(Q),o=o.slice(0,Q));var R=o.indexOf("?");if(-1!==R?(this.search=o.substr(R),this.query=o.substr(R+1),f&&(this.query=A.parse(this.query)),o=o.slice(0,R)):f&&(this.search="",this.query={}),o&&(this.pathname=o),z[i]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var M=this.pathname||"",L=this.search||"";this.path=M+L}return this.href=this.format(),this},o.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var f=this.protocol||"",n=this.pathname||"",o=this.hash||"",d=!1,i="";this.host?d=e+this.host:this.hostname&&(d=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(d+=":"+this.port)),this.query&&p(this.query)&&Object.keys(this.query).length&&(i=A.stringify(this.query));var t=this.search||i&&"?"+i||"";return f&&":"!==f.substr(-1)&&(f+=":"),this.slashes||(!f||z[f])&&d!==!1?(d="//"+(d||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):d||(d=""),o&&"#"!==o.charAt(0)&&(o="#"+o),t&&"?"!==t.charAt(0)&&(t="?"+t),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),t=t.replace("#","%23"),f+d+n+t+o},o.prototype.resolve=function(e){return this.resolveObject(d(e,!1,!0)).format()},o.prototype.resolveObject=function(e){if(u(e)){var f=new o;f.parse(e,!1,!0),e=f}var n=new o;if(Object.keys(this).forEach(function(e){n[e]=this[e]},this),n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol)return Object.keys(e).forEach(function(f){"protocol"!==f&&(n[f]=e[f])}),z[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n;if(e.protocol&&e.protocol!==n.protocol){if(!z[e.protocol])return Object.keys(e).forEach(function(f){n[f]=e[f]}),n.href=n.format(),n;if(n.protocol=e.protocol,e.host||q[e.protocol])n.pathname=e.pathname;else{for(var d=(e.pathname||"").split("/");d.length&&!(e.host=d.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var i=n.pathname||"",t=n.search||"";n.path=i+t}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var l=n.pathname&&"/"===n.pathname.charAt(0),p=e.host||e.pathname&&"/"===e.pathname.charAt(0),c=p||l||n.host&&e.pathname,r=c,a=n.pathname&&n.pathname.split("/")||[],d=e.pathname&&e.pathname.split("/")||[],w=n.protocol&&!z[n.protocol];if(w&&(n.hostname="",n.port=null,n.host&&(""===a[0]?a[0]=n.host:a.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===d[0]?d[0]=e.host:d.unshift(e.host)),e.host=null),c=c&&(""===d[0]||""===a[0])),p)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,a=d;else if(d.length)a||(a=[]),a.pop(),a=a.concat(d),n.search=e.search,n.query=e.query;else if(!y(e.search)){if(w){n.hostname=n.host=a.shift();var b=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;b&&(n.auth=b.shift(),n.host=n.hostname=b.shift())}return n.search=e.search,n.query=e.query,s(n.pathname)&&s(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!a.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var g=a.slice(-1)[0],m=(n.host||e.host)&&("."===g||".."===g)||""===g,x=0,h=a.length;h>=0;h--)g=a[h],"."==g?a.splice(h,1):".."===g?(a.splice(h,1),x++):x&&(a.splice(h,1),x--);if(!c&&!r)for(;x--;x)a.unshift("..");!c||""===a[0]||a[0]&&"/"===a[0].charAt(0)||a.unshift(""),m&&"/"!==a.join("/").substr(-1)&&a.push("");var j=""===a[0]||a[0]&&"/"===a[0].charAt(0);if(w){n.hostname=n.host=j?"":a.length?a.shift():"";var b=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;b&&(n.auth=b.shift(),n.host=n.hostname=b.shift())}return c=c||n.host&&a.length,c&&!j&&a.unshift(""),a.length?n.pathname=a.join("/"):(n.pathname=null,n.path=null),s(n.pathname)&&s(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var e=this.host,f=a.exec(e);f&&(f=f[0],":"!==f&&(this.port=f.substr(1)),e=e.substr(0,e.length-f.length)),e&&(this.hostname=e)}},{punycode:23,querystring:26}],30:[function(e,f,n){f.exports=e(5)},{}],31:[function(e,f,n){f.exports=e(6)},{}],32:[function(e,f,n){f.exports=e(7)},{"./support/isBuffer":31,FWaASH:8,inherits:30}],33:[function(e,f,n){var o=e("./modules/constants"),d=e("./modules/events"),i=e("./modules/logger"),t=e("./modules/ajax"),d=e("./modules/events"),l=e("./modules/waitForCloud"),u=e("./modules/api_act"),p=e("./modules/api_auth"),s=e("./modules/api_sec"),y=e("./modules/api_hash"),c=e("./modules/api_mbaas"),r=e("./modules/api_cloud"),a=e("./modules/api_push"),w=e("./modules/fhparams"),b=e("./modules/appProps"),g=e("./modules/device"),m=e("./modules/sync_cloud_handler"),x=function(e,f){d.addListener(e,f),e===o.INIT_EVENT&&(l.isReady()?f(null,{host:l.getCloudHostUrl()}):l.getInitError()&&f(l.getInitError()))},h=function(e,f){e===o.INIT_EVENT&&l.isReady()?f(null,{host:l.getCloudHostUrl()}):e===o.INIT_EVENT&&l.getInitError()?f(l.getInitError()):d.once(e,f)},j=function(e,f,n){i.warn("$fh.init will be deprecated soon"),l.ready(function(e,o){if(e){if("function"==typeof n)return n(e)}else"function"==typeof f&&f(o.host)})},v=window.$fh||{};v.init=j,v.act=u,v.auth=p,v.cloud=r,v.sec=s,v.hash=y,v.push=a,v.ajax=v.__ajax=t,v.mbaas=c,v.sync=e("fh-sync-js"),v.sync.setCloudHandler(m),v._getDeviceId=g.getDeviceId,v.fh_timeout=6e4,v.getCloudURL=function(){return l.getCloudHostUrl()},v.getFHParams=function(){return w.buildFHParams()},v.getFHHeaders=function(){return w.getFHHeaders()},v.addListener=x,v.on=x,v.once=h;for(var k=["removeListener","removeAllListeners","setMaxListeners","listeners","emit"],q=0;q<k.length;q++)v[k[q]]=d[k[q]];v.on(o.INIT_EVENT,function(e,f){e?(v.cloud_props={},v.app_props={}):(v.cloud_props={hosts:{url:f.host}},v.app_props=b.getAppProps())}),v.on(o.INTERNAL_CONFIG_LOADED_EVENT,function(e,f){e?v.app_props={}:v.app_props=b.getAppProps(),d.emit(o.CONFIG_LOADED_EVENT,null)}),v.reset=l.reset,window.$fh=v,f.exports=v},{"./modules/ajax":35,"./modules/api_act":36,"./modules/api_auth":37,"./modules/api_cloud":38,"./modules/api_hash":39,"./modules/api_mbaas":40,"./modules/api_push":41,"./modules/api_sec":42,"./modules/appProps":43,"./modules/constants":45,"./modules/device":48,"./modules/events":49,"./modules/fhparams":50,"./modules/logger":56,"./modules/sync_cloud_handler":64,"./modules/waitForCloud":66,"fh-sync-js":20}],34:[function(e,f,n){var o=e("url"),d=function(e){this.xdr=e,this.isWrapper=!0,this.readyState=0,this.onreadystatechange=null,this.status=0,this.statusText="",this.responseText="",this.headers={};var f=this;this.xdr.onload=function(){f.readyState=4,f.status=200,f.statusText="",f.responseText=f.xdr.responseText,f.onreadystatechange&&f.onreadystatechange()},this.xdr.onerror=function(){f.onerror&&f.onerror(),f.readyState=4,f.status=0,f.statusText="",f.onreadystatechange&&f.onreadystatechange()},this.xdr.ontimeout=function(){f.readyState=4,f.status=408,f.statusText="timeout",f.onreadystatechange&&f.onreadystatechange()}};d.prototype.open=function(e,f,n){var d=o.parse(f,!0);d.query=d.query||{},d.query.fh_headers=this.headers,this.xdr.open(e,o.format(d))},d.prototype.send=function(e){this.xdr.send(e)},d.prototype.abort=function(){this.xdr.abort()},d.prototype.setRequestHeader=function(e,f){this.headers[e]=f},d.prototype.getResponseHeader=function(e){},f.exports=d},{url:29}],35:[function(e,f,n){function o(e,f,n){return j.emit(f,n),!0}function d(e,f,n,d){return e.global?o(f||D,n,d):void 0}function i(e){e.global&&0===J.active++&&d(e,null,"ajaxStart")}function t(e){e.global&&!--J.active&&d(e,null,"ajaxStop")}function l(e,f){var n=f.context;return f.beforeSend.call(n,e,f)===!1?!1:void d(f,n,"ajaxSend",[e,f]);
}function u(e,f,n){var o=n.context,i="success";n.success.call(o,e,i,f),d(n,o,"ajaxSuccess",[f,n,e]),s(i,f,n)}function p(e,f,n,o){var i=o.context;o.error.call(i,n,f,e),d(o,i,"ajaxError",[n,o,e]),s(f,n,o)}function s(e,f,n){var o=n.context;n.complete.call(o,f,e),d(n,o,"ajaxComplete",[f,n]),t(n)}function y(){}function c(){var e=!1;return navigator.userAgent&&navigator.userAgent.indexOf("MSIE")>=0&&(e=!0),e}function r(e){var f=null;return window.XMLHttpRequest&&(f=new XMLHttpRequest),c()&&e===!0&&"undefined"!=typeof window.XDomainRequest&&"undefined"==typeof window.cordova&&(f=new v(new XDomainRequest)),f}function a(e){return e&&(e==H?"html":e==G?"json":E.test(e)?"script":F.test(e)&&"xml")||"text"}function w(e,f){return(e+"&"+f).replace(/[&?]{1,2}/,"?")}function b(e){"object"===h(e.data)&&("function"==typeof e.data.append?e.formdata=!0:e.data=m(e.data)),!e.data||e.type&&"GET"!=e.type.toUpperCase()||(e.url=w(e.url,e.data))}function g(e,f,n,o){var d="array"===h(f);for(var i in f){var t=f[i];o&&(i=n?o:o+"["+(d?"":i)+"]"),!o&&d?e.add(t.name,t.value):(n?"array"===h(t):"object"===h(t))?g(e,t,n,i):e.add(i,t)}}function m(e,f){var n=[];return n.add=function(e,f){this.push(K(e)+"="+K(f))},g(n,e,f),n.join("&").replace("%20","+")}function x(e){var f=Array.prototype.slice;return f.call(arguments,1).forEach(function(f){for(A in f)void 0!==f[A]&&(e[A]=f[A])}),e}var h,j=e("./events"),v=e("./XDomainRequestWrapper"),k=e("./logger");try{h=e("type-of")}catch(q){var z=e;h=z("type")}var A,B,C=0,D=window.document,E=/^(?:text|application)\/javascript/i,F=/^(?:text|application)\/xml/i,G="application/json",H="text/html",I=/^\s*$/,J=f.exports=function(f){var n=x({},f||{});window&&window.$fh&&"number"==typeof window.$fh.fh_timeout&&(J.settings.timeout=window.$fh.fh_timeout);for(A in J.settings)void 0===n[A]&&(n[A]=J.settings[A]);i(n),n.crossDomain||(n.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(n.url)&&(RegExp.$1!=window.location.protocol||RegExp.$2!=window.location.host));var o=n.dataType,d=/=\?/.test(n.url);if("jsonp"==o||d)return d||(n.url=w(n.url,(n.jsonp?n.jsonp:"_callback")+"=?")),J.JSONP(n);n.url||(n.url=window.location.toString()),b(n);var t=n.accepts[o],s={},c=/^([\w-]+:)\/\//.test(n.url)?RegExp.$1:window.location.protocol,r=n.xhr(n.crossDomain),g=null;n.crossDomain||(s["X-Requested-With"]="XMLHttpRequest"),t&&(s.Accept=t,t.indexOf(",")>-1&&(t=t.split(",",2)[0]),r.overrideMimeType&&r.overrideMimeType(t)),(n.contentType||n.data&&!n.formdata&&"GET"!=n.type.toUpperCase())&&(s["Content-Type"]=n.contentType||"application/x-www-form-urlencoded"),n.headers=x(s,n.headers||{}),r.onreadystatechange=function(){if(4==r.readyState){clearTimeout(g),g=void 0;var f,d=!1;if(n.tryJSONP&&0===r.status&&n.crossDomain&&!r.isTimeout&&"file:"!=c)return k.debug("retry ajax call with jsonp"),n.type="GET",n.dataType="jsonp",n.data?n.data="_jsonpdata="+JSON.stringify(e("./fhparams").addFHParams(JSON.parse(n.data))):n.data="_jsonpdata="+n.data,J(n);if(r.status>=200&&r.status<300||304==r.status||0==r.status&&"file:"==c){o=o||a(r.getResponseHeader("content-type")),f=r.responseText,k.debug("ajax response :: status = "+r.status+" :: body = "+f);try{"script"==o?(1,eval)(f):"xml"==o?f=r.responseXML:"json"==o&&(f=I.test(f)?null:JSON.parse(f))}catch(i){d=i}d?(k.debug("ajax error",d),p(d,"parsererror",r,n)):u(f,r,n)}else p(null,"error",r,n)}};var m="async"in n?n.async:!0;k.debug("ajax call settings",n),r.open(n.type,n.url,m);for(B in n.headers)r.setRequestHeader(B,n.headers[B]);return l(r,n)===!1?(k.debug("ajax call is aborted due to ajaxBeforeSend"),r.abort(),!1):(n.timeout>0&&(g=setTimeout(function(){k.debug("ajax call timed out"),r.onreadystatechange=y,r.abort(),r.isTimeout=!0,p(null,"timeout",r,n)},n.timeout)),r.send(n.data?n.data:null),r)};J.active=0,J.JSONP=function(e){if(!("type"in e))return J(e);var f,n="jsonp"+ ++C,o=D.createElement("script"),d=function(){n in window&&(window[n]=y),s("abort",i,e)},i={abort:d},t=D.getElementsByTagName("head")[0]||D.documentElement;return e.error&&(o.onerror=function(){i.abort(),e.error()}),window[n]=function(o){clearTimeout(f),f=void 0,delete window[n],u(o,i,e)},b(e),o.src=e.url.replace(/=\?/,"="+n),t.insertBefore(o,t.firstChild),e.timeout>0&&(f=setTimeout(function(){i.abort(),s("timeout",i,e)},e.timeout)),i},J.settings={type:"GET",beforeSend:y,success:y,error:y,complete:y,context:null,global:!0,xhr:r,accepts:{script:"text/javascript, application/javascript",json:G,xml:"application/xml, text/xml",html:H,text:"text/plain"},crossDomain:!1},J.get=function(e,f){return J({url:e,success:f})},J.post=function(e,f,n,o){return"function"===h(f)&&(o=o||n,n=f,f=null),J({type:"POST",url:e,data:f,success:n,dataType:o})},J.getJSON=function(e,f){return J({url:e,success:f,dataType:"json"})};var K=encodeURIComponent},{"./XDomainRequestWrapper":34,"./events":49,"./fhparams":50,"./logger":56,"type-of":27}],36:[function(e,f,n){function o(e,f,n){var o=i.getCloudHost(),d=o.getActUrl(e.act),y=e.req||{},c=t.getFHHeaders();return e.headers&&(c=s.extend(c,e.headers)),l({url:d,tryJSONP:!0,type:"POST",dataType:"json",data:JSON.stringify(y),headers:c,contentType:"application/json",timeout:e.timeout||p.timeout,success:f,error:function(e,f,o){return u(n,e,f,o)}})}var d=e("./logger"),i=e("./waitForCloud"),t=e("./fhparams"),l=e("./ajax"),u=e("./handleError"),p=e("./appProps"),s=e("underscore");f.exports=function(e,f,n){return d.debug("act is called"),n||(n=function(e,f){d.debug(e+":"+JSON.stringify(f))}),e.act?void i.ready(function(i,t){return d.debug("Calling fhact now"),i?n(i.message,i):void o(e,f,n)}):n("act_no_action",{})}},{"./ajax":35,"./appProps":43,"./fhparams":50,"./handleError":51,"./logger":56,"./waitForCloud":66,underscore:28}],37:[function(e,f,n){function o(e,f,n,o,u){var p=c.getAppProps(),y=p.host+s.boxprefix+"admin/authpolicy/"+e;p.local&&(y=i.getCloudHostUrl()+s.boxprefix+"admin/authpolicy/"+e),l({url:y,type:"POST",tryJSONP:!0,data:JSON.stringify(f),dataType:"json",contentType:"application/json",timeout:n.timeout||p.timeout,headers:t.getFHHeaders(),success:function(e){return o?o(e):void 0},error:function(f,n,o){d.error("got error when calling "+e,f.responseText||f,o),u&&u(f,n,o)}})}var d=e("./logger"),i=e("./waitForCloud"),t=e("./fhparams"),l=e("./ajax"),u=e("./handleError"),p=e("./device"),s=e("./constants"),y=e("./checkAuth"),c=e("./appProps"),r=e("./data"),a=function(e,f,n){return n||(n=function(e,f){d.debug(e+":"+JSON.stringify(f))}),e.policyId?e.clientToken?void i.ready(function(d,l){if(d)return n(d.message,d);var s={};s.policyId=e.policyId,s.clientToken=e.clientToken;var y=i.getCloudHost();y.getEnv()&&(s.environment=y.getEnv()),e.endRedirectUrl&&(s.endRedirectUrl=e.endRedirectUrl,e.authCallback&&(s.endRedirectUrl+=(/\?/.test(s.endRedirectUrl)?"&":"?")+"_fhAuthCallback="+e.authCallback)),s.params={},e.params&&(s.params=e.params);var c=e.endRedirectUrl||"status=complete";s.device=p.getDeviceId(),s=t.addFHParams(s),o("auth",s,e,function(e){a.authenticateHandler(c,e,f,n)},function(e,f,o){u(n,e,f,o)})}):n("auth_no_clientToken",{}):n("auth_no_policyId",{})};a.hasSession=function(e){r.sessionManager.exists(e)},a.clearSession=function(e){r.sessionManager.read(function(f,n){return f?e(f):(n&&o("revokesession",n,{}),r.sessionManager.remove(e),void t.setAuthSessionToken(void 0))})},a.authenticateHandler=y.handleAuthResponse,a.verify=function(e){r.sessionManager.read(function(f,n){return f?e(f):n?void o("verifysession",n,{},function(f){return e(null,f.isValid)},function(f,n,o){return e("network_error")}):e("no_session")})},f.exports=a},{"./ajax":35,"./appProps":43,"./checkAuth":44,"./constants":45,"./data":47,"./device":48,"./fhparams":50,"./handleError":51,"./logger":56,"./waitForCloud":66}],38:[function(e,f,n){function o(e,f,n){var o,d=i.getCloudHost(),y=d.getCloudUrl(e.path),c=e.data||{},r=e.method||"POST";o=-1!==["POST","PUT","PATCH","DELETE"].indexOf(r.toUpperCase())?JSON.stringify(c):c;var a=t.getFHHeaders();return e.headers&&(a=s.extend(a,e.headers)),l({url:y,type:r,dataType:e.dataType||"json",data:o,contentType:e.contentType||"application/json",timeout:e.timeout||p.timeout,headers:a,success:f,error:function(e,f,o){return u(n,e,f,o)}})}var d=e("./logger"),i=e("./waitForCloud"),t=e("./fhparams"),l=e("./ajax"),u=e("./handleError"),p=e("./appProps"),s=e("underscore");f.exports=function(e,f,n){d.debug("cloud is called"),n||(n=function(e,f){d.debug(e+":"+JSON.stringify(f))}),i.ready(function(i,t){return d.debug("Calling fhact now"),i?n(i.message,i):void o(e,f,n)})}},{"./ajax":35,"./appProps":43,"./fhparams":50,"./handleError":51,"./logger":56,"./waitForCloud":66,underscore:28}],39:[function(e,f,n){var o=e("./security/hash");f.exports=function(e,f,n){var d={};"undefined"==typeof e.algorithm&&(e.algorithm="MD5"),d.act="hash",d.params=e,o(d,f,n)}},{"./security/hash":62}],40:[function(e,f,n){var o=e("./logger"),d=e("./waitForCloud"),i=e("./fhparams"),t=e("./ajax"),l=e("./handleError"),u=(e("./constants"),e("./appProps"));f.exports=function(e,f,n){o.debug("mbaas is called."),n||(n=function(e,f){console.debug(e+":"+JSON.stringify(f))});var p=e.service,s=e.params;d.ready(function(y,c){if(o.debug("Calling mbaas now"),y)return n(y.message,y);var r=d.getCloudHost(),a=r.getMBAASUrl(p);return s=i.addFHParams(s),t({url:a,tryJSONP:!0,type:"POST",dataType:"json",data:JSON.stringify(s),headers:i.getFHHeaders(),contentType:"application/json",timeout:e.timeout||u.timeout,success:f,error:function(e,f,o){return l(n,e,f,o)}})})}},{"./ajax":35,"./appProps":43,"./constants":45,"./fhparams":50,"./handleError":51,"./logger":56,"./waitForCloud":66}],41:[function(e,f,n){var o=e("./logger"),d=e("./appProps"),i=e("./waitForCloud");f.exports=function(e,f,n,t){n||(n=function(e,f){o.debug(e+":"+JSON.stringify(f))}),i.ready(function(i,l){if(o.debug("push is called"),i)return n(i.message,i);if(window.push){var u=d.getAppProps();if(u.pushServerURL=u.host+"/api/v2/ag-push",t)for(var p in t)u[p]=t[p];window.push.register(e,f,n,u)}else n("push plugin not installed")})}},{"./appProps":43,"./logger":56,"./waitForCloud":66}],42:[function(e,f,n){var o=e("./security/aes-keygen"),d=e("./security/aes-node"),i=e("./security/rsa-node"),t=e("./security/hash");f.exports=function(e,f,n){return e.act?e.params?e.params.algorithm?(e.params.algorithm=e.params.algorithm.toLowerCase(),"hash"===e.act?t(e,f,n):"encrypt"===e.act?"aes"===e.params.algorithm?d.encrypt(e,f,n):"rsa"===e.params.algorithm?i.encrypt(e,f,n):n("encrypt_bad_algorithm:"+e.params.algorithm,{},e):"decrypt"===e.act?"aes"===e.params.algorithm?d.decrypt(e,f,n):n("decrypt_bad_algorithm:"+e.params.algorithm,{},e):"keygen"===e.act?"aes"===e.params.algorithm?o(e,f,n):n("keygen_bad_algorithm:"+e.params.algorithm,{},e):void 0):void n("no_params_algorithm",{},e):void n("no_params",{},e):void n("bad_act",{},e)}},{"./security/aes-keygen":60,"./security/aes-node":61,"./security/hash":62,"./security/rsa-node":63}],43:[function(e,f,n){var o=e("./constants"),d=e("./ajax"),i=e("./logger"),t=e("./queryMap"),l=e("underscore"),u=null,p=function(e){function f(f){l.extend(u,f,s),"undefined"!=typeof p.url&&(u.host=p.url),u.local=!!(s.host||p.url||f.local&&f.host),e(null,u)}var n=document.location.href,p=t(n.replace(/#.*?$/g,"")),s={};for(var y in p)p.hasOwnProperty(y)&&0===y.indexOf("fh_")&&(s[y.substr(3)]=decodeURI(p[y]));u={appid:"000000000000000000000000",appkey:"0000000000000000000000000000000000000000",projectid:"000000000000000000000000",connectiontag:"0.0.1"};var c=p.fhconfig||o.config_js;d({url:c,dataType:"json",success:function(n){return i.debug("fhconfig = "+JSON.stringify(n)),null==n?window.fh_app_props?f(window.fh_app_props):e(new Error("app_config_missing")):void f(n)},error:function(n,d,t){return window.fh_app_props?f(window.fh_app_props):(i.error(o.config_js+" Not Found"),void e(new Error("app_config_missing")))}})},s=function(e){u=e},y=function(){return u};f.exports={load:p,getAppProps:y,setAppProps:s}},{"./ajax":35,"./constants":45,"./logger":56,"./queryMap":58,underscore:28}],44:[function(e,f,n){var o=e("./logger"),d=e("./queryMap"),i=e("./fhparams"),t=e("./data"),l=function(e){if(/\_fhAuthCallback/.test(e)){var f=d(e);if(f){var n=f._fhAuthCallback;if(n)if(f.result&&"success"===f.result){var o={sessionToken:f.fh_auth_session,authResponse:JSON.parse(decodeURIComponent(decodeURIComponent(f.authResponse)))};i.setAuthSessionToken(f.fh_auth_session),t.sessionManager.save(f.fh_auth_session),window[n](null,o)}else window[n]({message:f.message})}}},u=function(e,f,n,l){if(f.status&&"ok"===f.status){var u=function(e){return e.sessionToken?(i.setAuthSessionToken(e.sessionToken),void t.sessionManager.save(e.sessionToken,function(){return n(e)})):n(e)};if(f.url){var p=null,s=function(f){if(f.indexOf(e)>-1){p&&p.close();var n=d(f);if(n)if(n.result&&"success"===n.result){var o={sessionToken:n.fh_auth_session,authResponse:JSON.parse(decodeURIComponent(decodeURIComponent(n.authResponse)))};u(o)}else l&&l("auth_failed",{message:n.message});else l&&l("auth_failed",{message:n.message})}};if(window.PhoneGap||window.cordova)if(window.plugins&&window.plugins.childBrowser)"function"==typeof window.plugins.childBrowser.showWebPage&&(window.plugins.childBrowser.onLocationChange=s,window.plugins.childBrowser.showWebPage(f.url),p=window.plugins.childBrowser);else try{p=window.open(f.url,"_blank","location=yes"),p.addEventListener("loadstart",function(e){s(e.url)})}catch(y){o.info("InAppBrowser plugin is not intalled."),u(f)}else document.location.href=f.url}else u(f)}else l&&l("auth_failed",f)};window.addEventListener?window.addEventListener("load",function(){l(window.location.href)},!1):window.attachEvent&&window.attachEvent("onload",function(){l(window.location.href)}),f.exports={handleAuthResponse:u}},{"./data":47,"./fhparams":50,"./logger":56,"./queryMap":58}],45:[function(e,f,n){f.exports={boxprefix:"/box/srv/1.1/",sdk_version:"3.0.2",config_js:"fhconfig.json",INIT_EVENT:"fhinit",INTERNAL_CONFIG_LOADED_EVENT:"internalfhconfigloaded",CONFIG_LOADED_EVENT:"fhconfigloaded",SESSION_TOKEN_STORAGE_NAME:"fh_session_token",SESSION_TOKEN_KEY_NAME:"sessionToken"}},{}],46:[function(e,f,n){f.exports={readCookieValue:function(e){for(var f=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var d=n[o];" "===d.charAt(0);)d=d.substring(1,d.length);if(0===d.indexOf(f))return d.substring(f.length,d.length)}return null},createCookie:function(e,f){var n=new Date;n.setTime(n.getTime()+31536e8);var o="; expires="+n.toGMTString();document.cookie=e+"="+f+o+"; path = /"}}},{}],47:[function(e,f,n){var o=e("../../libs/generated/lawnchair"),d=e("./lawnchair-ext"),i=e("./logger"),t=e("./constants"),l={DEFAULT_ADAPTERS:["dom","webkit-sqlite","window-name"],getStorage:function(e,f,n){var d=l.DEFAULT_ADAPTERS,t=n||function(){};f&&f.length>0&&(d="string"==typeof f?[f]:f);var u={name:e,adapter:d,fail:function(e,f){var n="read/save from/to local storage failed  msg:"+e+" err:"+f;i.error(n,f),t(n,{})}},p=o(u,function(){});return p},addFileStorageAdapter:function(e,f){o.adapter("localFileStorage",d.fileStorageAdapter(e,f))},sessionManager:{read:function(e){l.getStorage(t.SESSION_TOKEN_STORAGE_NAME).get(t.SESSION_TOKEN_KEY_NAME,function(f){return e?e(null,f):void 0})},exists:function(e){l.getStorage(t.SESSION_TOKEN_STORAGE_NAME).exists(t.SESSION_TOKEN_KEY_NAME,function(f){return e?e(null,f):void 0})},remove:function(e){l.getStorage(t.SESSION_TOKEN_STORAGE_NAME).remove(t.SESSION_TOKEN_KEY_NAME,function(){return e?e():void 0})},save:function(e,f){l.getStorage(t.SESSION_TOKEN_STORAGE_NAME).save({key:t.SESSION_TOKEN_KEY_NAME,sessionToken:e},function(e){return f?f():void 0})}}};f.exports=l},{"../../libs/generated/lawnchair":2,"./constants":45,"./lawnchair-ext":54,"./logger":56}],48:[function(e,f,n){var o=e("./cookies"),d=e("./uuid"),i=e("./logger");f.exports={getDeviceId:function(){if("undefined"!=typeof window.fhdevice&&"undefined"!=typeof window.fhdevice.uuid)return window.fhdevice.uuid;if("undefined"!=typeof window.device&&"undefined"!=typeof window.device.uuid)return window.device.uuid;if("undefined"!=typeof navigator.device&&"undefined"!=typeof navigator.device.uuid)return navigator.device.uuid;var e="mock_uuid",f=o.readCookieValue(e);return f||(f=d.createUUID(),o.createCookie(e,f)),f},getCuidMap:function(){return"undefined"!=typeof window.fhdevice&&"undefined"!=typeof window.fhdevice.cuidMap?window.fhdevice.cuidMap:"undefined"!=typeof window.device&&"undefined"!=typeof window.device.cuidMap?window.device.cuidMap:"undefined"!=typeof navigator.device&&"undefined"!=typeof navigator.device.cuidMap?navigator.device.cuidMap:null},getDestination:function(){var f=null,n=e("./platformsMap"),o=navigator.userAgent,d=document.location.search.split("fh_destination_code=");return d.length>1?f=d[1]:"undefined"!=typeof window.fh_destination_code?f=window.fh_destination_code:n.forEach(function(e){e.test.forEach(function(n){o.indexOf(n)>-1&&(f=e.destination)})}),null==f&&(f="web"),i.debug("destination = "+f),f}}},{"./cookies":46,"./logger":56,"./platformsMap":57,"./uuid":65}],49:[function(e,f,n){var o=e("events").EventEmitter,d=new o;d.setMaxListeners(0),f.exports=d},{events:10}],50:[function(e,f,n){var o=e("./device"),d=e("./sdkversion"),i=e("./appProps"),t=e("./logger"),l=null,u=null,p=function(){if(l)return l;var e={};e.cuid=o.getDeviceId(),e.cuidMap=o.getCuidMap(),e.destination=o.getDestination(),(window.device||navigator.device)&&(e.device=window.device||navigator.device),"undefined"!=typeof window.fh_app_version&&(e.app_version=fh_app_version),"undefined"!=typeof window.fh_project_version&&(e.project_version=fh_project_version),"undefined"!=typeof window.fh_project_app_version&&(e.project_app_version=fh_project_app_version),e.sdk_version=d(),u&&(e.sessionToken=u);var f=i.getAppProps();return f&&(e.appid=f.appid,e.appkey=f.appkey,e.projectid=f.projectid,e.analyticsTag=f.analyticsTag,e.connectiontag=f.connectiontag,f.init&&(e.init="string"==typeof f.init?JSON.parse(f.init):f.init)),l=e,t.debug("fhparams = ",l),e},s=function(e){var f=e||{};return f.__fh=p(),f},y=function(){var e={},f=p();for(var n in f)f.hasOwnProperty(n)&&(e["X-FH-"+n]=f[n]);return e},c=function(e){u=e,l=null};f.exports={buildFHParams:p,addFHParams:s,setAuthSessionToken:c,getFHHeaders:y}},{"./appProps":43,"./device":48,"./logger":56,"./sdkversion":59}],51:[function(e,f,n){f.exports=function(e,f,n,o){var d,i=0;if(f)try{i=f.status;var t=JSON.parse(f.responseText);d=t.error||t.msg||t,d instanceof Array&&(d=d.join("\n"))}catch(l){d=f.responseText}e&&e(d,{status:i,message:n,error:o})}},{}],52:[function(e,f,n){function o(e){var f=e;return"/"===f.charAt(f.length-1)&&(f=f.substring(0,f.length-1)),f}function d(e){var f=e;return f.length>1&&"/"===f.charAt(0)&&(f=f.substring(1,f.length)),f}function i(e){this.cloud_props=e,this.cloud_host=void 0,this.app_env=null,this.isLegacy=!1}var t=e("./constants"),l=e("./appProps");i.prototype.getHost=function(e){if(this.cloud_host)return this.cloud_host;var f,n;if(this.cloud_props&&this.cloud_props.hosts&&(f=this.cloud_props.hosts.url,"undefined"==typeof f)){var d=this.cloud_props.hosts.releaseCloudUrl;n=this.cloud_props.hosts.releaseCloudType,"undefined"!=typeof e&&e.indexOf("dev")>-1&&(d=this.cloud_props.hosts.debugCloudUrl,n=this.cloud_props.hosts.debugCloudType),f=d}return f=o(f),this.cloud_host=f,"fh"===n&&(this.isLegacy=!0),f},i.prototype.getActUrl=function(e){var f=l.getAppProps()||{};return"undefined"==typeof this.cloud_host&&this.getHost(f.mode),this.isLegacy?this.cloud_host+t.boxprefix+"act/"+this.cloud_props.domain+"/"+f.appid+"/"+e+"/"+f.appid:this.cloud_host+"/cloud/"+e},i.prototype.getMBAASUrl=function(e){var f=l.getAppProps()||{};return"undefined"==typeof this.cloud_host&&this.getHost(f.mode),this.cloud_host+"/mbaas/"+e},i.prototype.getCloudUrl=function(e){var f=l.getAppProps()||{};return"undefined"==typeof this.cloud_host&&this.getHost(f.mode),this.cloud_host+"/"+d(e)},i.prototype.getEnv=function(){return this.app_env?this.app_env:(this.cloud_props&&this.cloud_props.hosts&&(this.app_env=this.cloud_props.hosts.environment),this.app_env)},f.exports=i},{"./appProps":43,"./constants":45}],53:[function(e,f,n){var o=(e("./loadScript"),e("./constants")),d=e("./fhparams"),i=e("./ajax"),t=e("./handleError"),l=e("./logger"),u=e("./security/hash"),p=e("./appProps"),s=e("./constants"),y=e("./events"),c=e("./data"),r=function(e){p.load(function(f,n){return f?e(f):(y.emit(s.INTERNAL_CONFIG_LOADED_EVENT,null,n),a(n,e))})},a=function(e,f){if(e.loglevel&&l.setLevel(e.loglevel),e.local){var n={domain:"local",firstTime:!1,hosts:{debugCloudType:"node",debugCloudUrl:e.host,releaseCloudType:"node",releaseCloudUrl:e.host,type:"cloud_nodejs",url:e.host},init:{trackId:"000000000000000000000000"},status:"ok"};return f(null,{cloud:n})}c.addFileStorageAdapter(e,u);var p=function(e,n,o,u){var p=d.buildFHParams();i({url:e,type:"POST",tryJSONP:!0,dataType:"json",contentType:"application/json",data:JSON.stringify(p),timeout:n.timeout,success:function(e){u&&u.save({key:"fh_init",value:e},function(){}),f&&f(null,{cloud:e})},error:function(e,n,d){var i="unknown";e&&(i=e.status+" - "+e.responseText),l.error("App init returned error : "+i),!o||e&&400===e.status?(e&&400===e.status?l.error(e.responseText):l.error("No cached host found. Init failed."),t(function(e,n){f&&f({error:n,message:e})},e,n,d)):(l.info("Using cached host: "+JSON.stringify(o)),f&&f(null,{cloud:o}))}})},s=null,y=e.host+o.boxprefix+"app/init";try{s=c.getStorage("fh_init_storage",null),s.get("fh_init",function(f){var n=null;f&&null!==f.value&&"undefined"!=typeof f.value&&""!==f&&(f="string"==typeof f?JSON.parse(f):f,f.value="string"==typeof f.value?JSON.parse(f.value):f.value,f.value.init?e.init=f.value.init:e.init="string"==typeof f.value?JSON.parse(f.value):f.value,f.value.hosts&&(n=f.value)),p(y,e,n,s)})}catch(r){p(y,e,null,null)}};f.exports={init:r,loadCloudProps:a}},{"./ajax":35,"./appProps":43,"./constants":45,"./data":47,"./events":49,"./fhparams":50,"./handleError":51,"./loadScript":55,"./logger":56,"./security/hash":62}],54:[function(e,f,n){var o=function(e,f){function n(e){console&&console.log(e)}function o(o,d){o=e.appid+o,f({algorithm:"MD5",text:o},function(e){var f=e.hashvalue+".txt";return"undefined"==typeof navigator.externalstorage?(n("filenameForKey key="+o+" , Filename: "+f),d(f)):void navigator.externalstorage.enable(function(e){var n=f;return e.path&&(n=e.path,n.match(/\/$/)||(n+="/"),n+=f),f=n,d(f)},function(e){return d(f)})})}var d=function(e,f){if(!console)throw e;console.log("error in file system adapter !",e,f)};return{valid:function(){return!!window.requestFileSystem},init:function(e,f){e&&"function"==typeof e.fail&&(d=e.fail),f&&this.fn(this.name,f).call(this,this)},keys:function(e){throw"Currently not supported"},save:function(e,f){var n=e.key,i=e.val||e.value;o(n,function(e){window.requestFileSystem(LocalFileSystem.PERSISTENT,0,function(o){o.root.getFile(e,{create:!0},function(e){e.createWriter(function(e){e.onwrite=function(){return f({key:n,val:i})},e.write(i)},function(){d("[save] Failed to create file writer")})},function(){d("[save] Failed to getFile")})},function(){d("[save] Failed to requestFileSystem")})})},batch:function(e,f){throw"Currently not supported"},get:function(e,f){o(e,function(n){window.requestFileSystem(LocalFileSystem.PERSISTENT,0,function(o){o.root.getFile(n,{},function(n){n.file(function(n){var o=new FileReader;o.onloadend=function(n){var o=n.target.result;try{o=decodeURIComponent(o)}catch(d){}return f({key:e,val:o})},o.readAsText(n)},function(){d("[load] Failed to getFile")})},function(){f({key:e,val:null})})},function(){d("[load] Failed to get fileSystem")})})},exists:function(e,f){o(e,function(e){window.requestFileSystem(LocalFileSystem.PERSISTENT,0,function(n){n.root.getFile(e,{},function(e){return f(!0)},function(e){return f(!1)})})})},all:function(e){throw"Currently not supported"},remove:function(e,f){o(e,function(n){window.requestFileSystem(LocalFileSystem.PERSISTENT,0,function(o){o.root.getFile(n,{},function(n){n.remove(function(){return f({key:e,val:null})},function(){d("[remove] Failed to remove file")})},function(){d("[remove] Failed to getFile")})},function(){d("[remove] Failed to get fileSystem")})})},nuke:function(e){throw"Currently not supported"}}};f.exports={fileStorageAdapter:o}},{}],55:[function(e,f,n){f.exports=function(e,f){var n,o=document.head||document.getElementsByTagName("head")[0]||document.documentElement;n=document.createElement("script"),n.async="async",n.src=e,n.type="text/javascript",n.onload=n.onreadystatechange=function(){(!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,o&&n.parentNode&&o.removeChild(n),n=void 0,f&&"function"==typeof f&&f())},o.insertBefore(n,o.firstChild)}},{}],56:[function(e,f,n){var o=(e("console"),e("loglevel"));o.setLevel("info"),f.exports=o},{console:9,loglevel:22}],57:[function(e,f,n){f.exports=[{destination:"ipad",test:["iPad"]},{destination:"iphone",test:["iPhone"]},{destination:"android",test:["Android"]},{destination:"blackberry",test:["BlackBerry","BB10","RIM Tablet OS"]},{destination:"windowsphone",test:["Windows Phone 8"]},{destination:"windowsphone7",test:["Windows Phone OS 7"]}]},{}],58:[function(e,f,n){f.exports=function(e){var f={},n=e.split("?");if(2===n.length){var o=n[1],d=o.split("&");f={};for(var i=0;i<d.length;i++){var t=d[i],l=t.split("=");f[l[0]]=l[1]}}return f}},{}],59:[function(e,f,n){var o=e("./constants");f.exports=function(){var e="FH_JS_SDK";return"undefined"!=typeof window.fh_destination_code?e="FH_HYBRID_SDK":(window.PhoneGap||window.cordova)&&(e="FH_PHONEGAP_SDK"),e+"/"+o.sdk_version}},{"./constants":45}],60:[function(e,f,n){var o=e("../../../libs/rsa"),d=o.SecureRandom,i=o.byte2Hex,t=function(e){var f=new d,n=new Array(e);f.nextBytes(n);for(var o="",t=0;t<n.length;t++)o+=i(n[t]);return o},l=function(e,f,n){if(!e.params.keysize)return void n("no_params_keysize",{},e);if("aes"!==e.params.algorithm.toLowerCase())return void n("keygen_bad_algorithm",{},e);var o=parseInt(e.params.keysize,10);return o>100&&(o/=8),"undefined"==typeof d?n("security library is not loaded."):f({algorithm:"AES",secretkey:t(o),iv:t(o)})};f.exports=l},{"../../../libs/rsa":3}],61:[function(e,f,n){var o=e("../../../libs/generated/crypto"),d=function(e,f,n){var d=["key","plaintext","iv"];if("aes"!==e.params.algorithm.toLowerCase())return n("encrypt_bad_algorithm",{},e);for(var i=0;d>i;i++){var t=d[i];if(!e.params[t])return n("no_params_"+t,{},e)}var l=o.AES.encrypt(e.params.plaintext,o.enc.Hex.parse(e.params.key),{iv:o.enc.Hex.parse(e.params.iv)});return cipher_text=o.enc.Hex.stringify(l.ciphertext),f({ciphertext:cipher_text})},i=function(e,f,n){var d=["key","ciphertext","iv"];if("aes"!==e.params.algorithm.toLowerCase())return n("decrypt_bad_algorithm",{},e);for(var i=0;d>i;i++){var t=d[i];if(!e.params[t])return n("no_params_"+t,{},e)}var l=o.enc.Hex.parse(e.params.ciphertext),u=o.enc.Base64.stringify(l),p=o.AES.decrypt(u,o.enc.Hex.parse(e.params.key),{iv:o.enc.Hex.parse(e.params.iv)});try{return f({plaintext:p.toString(o.enc.Utf8)})}catch(s){return n(s)}};f.exports={encrypt:d,decrypt:i}},{"../../../libs/generated/crypto":1}],62:[function(e,f,n){var o=e("../../../libs/generated/crypto"),d=function(e,f,n){if(!e.params.text)return void n("hash_no_text",{},e);var d;if("md5"===e.params.algorithm.toLowerCase())d=o.MD5(e.params.text).toString(o.enc.Hex);else if("sha1"===e.params.algorithm.toLowerCase())d=o.SHA1(e.params.text).toString(o.enc.Hex);else if("sha256"===e.params.algorithm.toLowerCase())d=o.SHA256(e.params.text).toString(o.enc.Hex);else{if("sha512"!==e.params.algorithm.toLowerCase())return n("hash_unsupported_algorithm: "+e.params.algorithm);d=o.SHA512(e.params.text).toString(o.enc.Hex)}return f({hashvalue:d})};f.exports=d},{"../../../libs/generated/crypto":1}],63:[function(e,f,n){var o=e("../../../libs/rsa"),d=o.RSAKey,i=function(e,f,n){var o=["modulu","plaintext"];if("rsa"!==e.params.algorithm.toLowerCase())return n("encrypt_bad_algorithm",{},e);for(var i=0;o>i;i++){var t=o[i];if(!e.params[t])return n("no_params_"+t,{},e)}var l=new d;l.setPublic(e.params.modulu,"10001");var u=e.params.plaintext;return cipher_text=l.encrypt(u),f({ciphertext:cipher_text})};f.exports={encrypt:i}},{"../../../libs/rsa":3}],64:[function(e,f,n){var o=e("./api_cloud");f.exports=function(e,f,n){o({path:"/mbaas/sync/"+e.dataset_id,method:"post",data:e.req},f,n)}},{"./api_cloud":38}],65:[function(e,f,n){f.exports={createUUID:function(){for(var e=[],f="0123456789ABCDEF",n=0;32>n;n++)e[n]=f.substr(Math.floor(16*Math.random()),1);e[12]="4",e[16]=f.substr(3&e[16]|8,1);var o=e.join("");return o}}},{}],66:[function(e,f,n){var o,d=e("./initializer"),i=e("./events"),t=e("./hosts"),l=e("./constants"),u=e("./logger"),p=e("./data"),s=e("./fhparams"),y=!1,c=!1,r=null,a=function(e){if(c)return e(null,{host:b()});if(i.once(l.INIT_EVENT,function(f,n){return e(f,n)}),!y){y=!0;var f=function(){p.sessionManager.read(function(e,f){f&&f.sessionToken&&s.setAuthSessionToken(f.sessionToken),d.init(function(e,f){return y=!1,e?(r=e,i.emit(l.INIT_EVENT,e)):(r=null,c=!0,o=new t(f.cloud),i.emit(l.INIT_EVENT,null,{host:b()}))})})};"undefined"!=typeof window.cordova||"undefined"!=typeof window.phonegap?document.addEventListener("deviceready",f,!1):f()}},w=function(){return o},b=function(){if("undefined"!=typeof o){var f=e("./appProps").getAppProps();return o.getHost(f.mode)}return void 0},g=function(){return c},m=function(){return r},x=function(){c=!1,y=!1,o=void 0,r=void 0,a(function(){})};a(function(e,f){e?"app_config_missing"!==e.message?u.error("Failed to initialise fh."):u.info("No fh config file"):u.info("fh cloud is ready")}),f.exports={ready:a,isReady:g,getCloudHost:w,getCloudHostUrl:b,getInitError:m,reset:x}},{"./appProps":43,"./constants":45,"./data":47,"./events":49,"./fhparams":50,"./hosts":52,"./initializer":53,"./logger":56}]},{},[33])(33)});